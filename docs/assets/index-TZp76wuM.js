const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/home-page-C6LP4tzv.js","assets/PageTransitionsMixin-C3JExxZE.js","assets/game-button-CO_Y6CyP.js","assets/game-page-CIkoBjjK.js","assets/score-config.config-D_er6gHQ.js","assets/score-page-CZkkBCNc.js","assets/not-found-page-BWdokVNO.js"])))=>i.map(i=>d[i]);
var tn=Object.defineProperty;var nn=(i,e,t)=>e in i?tn(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var p=(i,e,t)=>nn(i,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();var xe=function(i,e){return xe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},xe(i,e)};function q(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");xe(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function Ai(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s}function rn(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(n.next(u))}catch(h){o(h)}}function c(u){try{l(n.throw(u))}catch(h){o(h)}}function l(u){u.done?s(u.value):r(u.value).then(a,c)}l((n=n.apply(i,e||[])).next())})}function gt(i,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,r,s,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(t=0)),t;)try{if(n=1,r&&(s=l[0]&2?r.return:l[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,l[1])).done)return s;switch(r=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,r=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){t.label=l[1];break}if(l[0]===6&&t.label<s[1]){t.label=s[1],s=l;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(l);break}s[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(i,t)}catch(u){l=[6,u],r=0}finally{n=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function F(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],n=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&n>=i.length&&(i=void 0),{value:i&&i[n++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Z(i,e){var t=typeof Symbol=="function"&&i[Symbol.iterator];if(!t)return i;var n=t.call(i),r,s=[],o;try{for(;(e===void 0||e-- >0)&&!(r=n.next()).done;)s.push(r.value)}catch(a){o={error:a}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s}function he(i,e,t){if(t||arguments.length===2)for(var n=0,r=e.length,s;n<r;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return i.concat(s||Array.prototype.slice.call(e))}function j(i){return this instanceof j?(this.v=i,this):new j(i)}function sn(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(i,e||[]),r,s=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),r[Symbol.asyncIterator]=function(){return this},r;function o(f){return function(b){return Promise.resolve(b).then(f,h)}}function a(f,b){n[f]&&(r[f]=function(m){return new Promise(function(T,G){s.push([f,m,T,G])>1||c(f,m)})},b&&(r[f]=b(r[f])))}function c(f,b){try{l(n[f](b))}catch(m){d(s[0][3],m)}}function l(f){f.value instanceof j?Promise.resolve(f.value.v).then(u,h):d(s[0][2],f)}function u(f){c("next",f)}function h(f){c("throw",f)}function d(f,b){f(b),s.shift(),s.length&&c(s[0][0],s[0][1])}}function on(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof F=="function"?F(i):i[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(s){t[s]=i[s]&&function(o){return new Promise(function(a,c){o=i[s](o),r(a,c,o.done,o.value)})}}function r(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}function v(i){return typeof i=="function"}function mt(i){var e=function(n){Error.call(n),n.stack=new Error().stack},t=i(e);return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var be=mt(function(i){return function(t){i(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(n,r){return r+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t}});function Te(i,e){if(i){var t=i.indexOf(e);0<=t&&i.splice(t,1)}}var E=function(){function i(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return i.prototype.unsubscribe=function(){var e,t,n,r,s;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var a=F(o),c=a.next();!c.done;c=a.next()){var l=c.value;l.remove(this)}}catch(m){e={error:m}}finally{try{c&&!c.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}else o.remove(this);var u=this.initialTeardown;if(v(u))try{u()}catch(m){s=m instanceof be?m.errors:[m]}var h=this._finalizers;if(h){this._finalizers=null;try{for(var d=F(h),f=d.next();!f.done;f=d.next()){var b=f.value;try{ze(b)}catch(m){s=s??[],m instanceof be?s=he(he([],Z(s)),Z(m.errors)):s.push(m)}}}catch(m){n={error:m}}finally{try{f&&!f.done&&(r=d.return)&&r.call(d)}finally{if(n)throw n.error}}}if(s)throw new be(s)}},i.prototype.add=function(e){var t;if(e&&e!==this)if(this.closed)ze(e);else{if(e instanceof i){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}},i.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},i.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},i.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&Te(t,e)},i.prototype.remove=function(e){var t=this._finalizers;t&&Te(t,e),e instanceof i&&e._removeParent(this)},i.EMPTY=function(){var e=new i;return e.closed=!0,e}(),i}(),vt=E.EMPTY;function bt(i){return i instanceof E||i&&"closed"in i&&v(i.remove)&&v(i.add)&&v(i.unsubscribe)}function ze(i){v(i)?i():i.unsubscribe()}var an={Promise:void 0},cn={setTimeout:function(i,e){for(var t=[],n=2;n<arguments.length;n++)t[n-2]=arguments[n];return setTimeout.apply(void 0,he([i,e],Z(t)))},clearTimeout:function(i){return clearTimeout(i)},delegate:void 0};function yt(i){cn.setTimeout(function(){throw i})}function We(){}function ce(i){i()}var Ne=function(i){q(e,i);function e(t){var n=i.call(this)||this;return n.isStopped=!1,t?(n.destination=t,bt(t)&&t.add(n)):n.destination=hn,n}return e.create=function(t,n,r){return new $e(t,n,r)},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,i.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(E),ln=function(){function i(e){this.partialObserver=e}return i.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(n){se(n)}},i.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(n){se(n)}else se(e)},i.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(t){se(t)}},i}(),$e=function(i){q(e,i);function e(t,n,r){var s=i.call(this)||this,o;return v(t)||!t?o={next:t??void 0,error:n??void 0,complete:r??void 0}:o=t,s.destination=new ln(o),s}return e}(Ne);function se(i){yt(i)}function un(i){throw i}var hn={closed:!0,next:We,error:un,complete:We},Me=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function Le(i){return i}function pn(i){return i.length===0?Le:i.length===1?i[0]:function(t){return i.reduce(function(n,r){return r(n)},t)}}var w=function(){function i(e){e&&(this._subscribe=e)}return i.prototype.lift=function(e){var t=new i;return t.source=this,t.operator=e,t},i.prototype.subscribe=function(e,t,n){var r=this,s=dn(e)?e:new $e(e,t,n);return ce(function(){var o=r,a=o.operator,c=o.source;s.add(a?a.call(s,c):c?r._subscribe(s):r._trySubscribe(s))}),s},i.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},i.prototype.forEach=function(e,t){var n=this;return t=qe(t),new t(function(r,s){var o=new $e({next:function(a){try{e(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:r});n.subscribe(o)})},i.prototype._subscribe=function(e){var t;return(t=this.source)===null||t===void 0?void 0:t.subscribe(e)},i.prototype[Me]=function(){return this},i.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return pn(e)(this)},i.prototype.toPromise=function(e){var t=this;return e=qe(e),new e(function(n,r){var s;t.subscribe(function(o){return s=o},function(o){return r(o)},function(){return n(s)})})},i.create=function(e){return new i(e)},i}();function qe(i){var e;return(e=i??an.Promise)!==null&&e!==void 0?e:Promise}function fn(i){return i&&v(i.next)&&v(i.error)&&v(i.complete)}function dn(i){return i&&i instanceof Ne||fn(i)&&bt(i)}function gn(i){return v(i==null?void 0:i.lift)}function L(i){return function(e){if(gn(e))return e.lift(function(t){try{return i(t,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function D(i,e,t,n,r){return new mn(i,e,t,n,r)}var mn=function(i){q(e,i);function e(t,n,r,s,o,a){var c=i.call(this,t)||this;return c.onFinalize=o,c.shouldUnsubscribe=a,c._next=n?function(l){try{n(l)}catch(u){t.error(u)}}:i.prototype._next,c._error=s?function(l){try{s(l)}catch(u){t.error(u)}finally{this.unsubscribe()}}:i.prototype._error,c._complete=r?function(){try{r()}catch(l){t.error(l)}finally{this.unsubscribe()}}:i.prototype._complete,c}return e.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;i.prototype.unsubscribe.call(this),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}},e}(Ne),vn=mt(function(i){return function(){i(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),_t=function(i){q(e,i);function e(){var t=i.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return e.prototype.lift=function(t){var n=new Ge(this,this);return n.operator=t,n},e.prototype._throwIfClosed=function(){if(this.closed)throw new vn},e.prototype.next=function(t){var n=this;ce(function(){var r,s;if(n._throwIfClosed(),!n.isStopped){n.currentObservers||(n.currentObservers=Array.from(n.observers));try{for(var o=F(n.currentObservers),a=o.next();!a.done;a=o.next()){var c=a.value;c.next(t)}}catch(l){r={error:l}}finally{try{a&&!a.done&&(s=o.return)&&s.call(o)}finally{if(r)throw r.error}}}})},e.prototype.error=function(t){var n=this;ce(function(){if(n._throwIfClosed(),!n.isStopped){n.hasError=n.isStopped=!0,n.thrownError=t;for(var r=n.observers;r.length;)r.shift().error(t)}})},e.prototype.complete=function(){var t=this;ce(function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var n=t.observers;n.length;)n.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(t){return this._throwIfClosed(),i.prototype._trySubscribe.call(this,t)},e.prototype._subscribe=function(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)},e.prototype._innerSubscribe=function(t){var n=this,r=this,s=r.hasError,o=r.isStopped,a=r.observers;return s||o?vt:(this.currentObservers=null,a.push(t),new E(function(){n.currentObservers=null,Te(a,t)}))},e.prototype._checkFinalizedStatuses=function(t){var n=this,r=n.hasError,s=n.thrownError,o=n.isStopped;r?t.error(s):o&&t.complete()},e.prototype.asObservable=function(){var t=new w;return t.source=this,t},e.create=function(t,n){return new Ge(t,n)},e}(w),Ge=function(i){q(e,i);function e(t,n){var r=i.call(this)||this;return r.destination=t,r.source=n,r}return e.prototype.next=function(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,t)},e.prototype.error=function(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,t)},e.prototype.complete=function(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)},e.prototype._subscribe=function(t){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&r!==void 0?r:vt},e}(_t),Ct={now:function(){return(Ct.delegate||Date).now()},delegate:void 0},bn=function(i){q(e,i);function e(t,n,r){t===void 0&&(t=1/0),n===void 0&&(n=1/0),r===void 0&&(r=Ct);var s=i.call(this)||this;return s._bufferSize=t,s._windowTime=n,s._timestampProvider=r,s._buffer=[],s._infiniteTimeWindow=!0,s._infiniteTimeWindow=n===1/0,s._bufferSize=Math.max(1,t),s._windowTime=Math.max(1,n),s}return e.prototype.next=function(t){var n=this,r=n.isStopped,s=n._buffer,o=n._infiniteTimeWindow,a=n._timestampProvider,c=n._windowTime;r||(s.push(t),!o&&s.push(a.now()+c)),this._trimBuffer(),i.prototype.next.call(this,t)},e.prototype._subscribe=function(t){this._throwIfClosed(),this._trimBuffer();for(var n=this._innerSubscribe(t),r=this,s=r._infiniteTimeWindow,o=r._buffer,a=o.slice(),c=0;c<a.length&&!t.closed;c+=s?1:2)t.next(a[c]);return this._checkFinalizedStatuses(t),n},e.prototype._trimBuffer=function(){var t=this,n=t._bufferSize,r=t._timestampProvider,s=t._buffer,o=t._infiniteTimeWindow,a=(o?1:2)*n;if(n<1/0&&a<s.length&&s.splice(0,s.length-a),!o){for(var c=r.now(),l=0,u=1;u<s.length&&s[u]<=c;u+=2)l=u;l&&s.splice(0,l+1)}},e}(_t),yn=new w(function(i){return i.complete()});function _n(i){return i&&v(i.schedule)}function wt(i){return i[i.length-1]}function ke(i){return _n(wt(i))?i.pop():void 0}function Cn(i,e){return typeof wt(i)=="number"?i.pop():e}var Be=function(i){return i&&typeof i.length=="number"&&typeof i!="function"};function Et(i){return v(i==null?void 0:i.then)}function St(i){return v(i[Me])}function At(i){return Symbol.asyncIterator&&v(i==null?void 0:i[Symbol.asyncIterator])}function Pt(i){return new TypeError("You provided "+(i!==null&&typeof i=="object"?"an invalid object":"'"+i+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function wn(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var xt=wn();function Tt(i){return v(i==null?void 0:i[xt])}function $t(i){return sn(this,arguments,function(){var t,n,r,s;return gt(this,function(o){switch(o.label){case 0:t=i.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,j(t.read())];case 3:return n=o.sent(),r=n.value,s=n.done,s?[4,j(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,j(r)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}function Ot(i){return v(i==null?void 0:i.getReader)}function k(i){if(i instanceof w)return i;if(i!=null){if(St(i))return En(i);if(Be(i))return Sn(i);if(Et(i))return An(i);if(At(i))return It(i);if(Tt(i))return Pn(i);if(Ot(i))return xn(i)}throw Pt(i)}function En(i){return new w(function(e){var t=i[Me]();if(v(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Sn(i){return new w(function(e){for(var t=0;t<i.length&&!e.closed;t++)e.next(i[t]);e.complete()})}function An(i){return new w(function(e){i.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,yt)})}function Pn(i){return new w(function(e){var t,n;try{for(var r=F(i),s=r.next();!s.done;s=r.next()){var o=s.value;if(e.next(o),e.closed)return}}catch(a){t={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}e.complete()})}function It(i){return new w(function(e){Tn(i,e).catch(function(t){return e.error(t)})})}function xn(i){return It($t(i))}function Tn(i,e){var t,n,r,s;return rn(this,void 0,void 0,function(){var o,a;return gt(this,function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),t=on(i),c.label=1;case 1:return[4,t.next()];case 2:if(n=c.sent(),!!n.done)return[3,4];if(o=n.value,e.next(o),e.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=c.sent(),r={error:a},[3,11];case 6:return c.trys.push([6,,9,10]),n&&!n.done&&(s=t.return)?[4,s.call(t)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(r)throw r.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function I(i,e,t,n,r){n===void 0&&(n=0),r===void 0&&(r=!1);var s=e.schedule(function(){t(),r?i.add(this.schedule(null,n)):this.unsubscribe()},n);if(i.add(s),!r)return s}function Rt(i,e){return e===void 0&&(e=0),L(function(t,n){t.subscribe(D(n,function(r){return I(n,i,function(){return n.next(r)},e)},function(){return I(n,i,function(){return n.complete()},e)},function(r){return I(n,i,function(){return n.error(r)},e)}))})}function Nt(i,e){return e===void 0&&(e=0),L(function(t,n){n.add(i.schedule(function(){return t.subscribe(n)},e))})}function $n(i,e){return k(i).pipe(Nt(e),Rt(e))}function On(i,e){return k(i).pipe(Nt(e),Rt(e))}function In(i,e){return new w(function(t){var n=0;return e.schedule(function(){n===i.length?t.complete():(t.next(i[n++]),t.closed||this.schedule())})})}function Rn(i,e){return new w(function(t){var n;return I(t,e,function(){n=i[xt](),I(t,e,function(){var r,s,o;try{r=n.next(),s=r.value,o=r.done}catch(a){t.error(a);return}o?t.complete():t.next(s)},0,!0)}),function(){return v(n==null?void 0:n.return)&&n.return()}})}function Mt(i,e){if(!i)throw new Error("Iterable cannot be null");return new w(function(t){I(t,e,function(){var n=i[Symbol.asyncIterator]();I(t,e,function(){n.next().then(function(r){r.done?t.complete():t.next(r.value)})},0,!0)})})}function Nn(i,e){return Mt($t(i),e)}function Mn(i,e){if(i!=null){if(St(i))return $n(i,e);if(Be(i))return In(i,e);if(Et(i))return On(i,e);if(At(i))return Mt(i,e);if(Tt(i))return Rn(i,e);if(Ot(i))return Nn(i,e)}throw Pt(i)}function Lt(i,e){return e?Mn(i,e):k(i)}function K(i,e){return L(function(t,n){var r=0;t.subscribe(D(n,function(s){n.next(i.call(e,s,r++))}))})}var Ln=Array.isArray;function kn(i,e){return Ln(e)?i.apply(void 0,he([],Z(e))):i(e)}function Bn(i){return K(function(e){return kn(i,e)})}function Un(i,e,t,n,r,s,o,a){var c=[],l=0,u=0,h=!1,d=function(){h&&!c.length&&!l&&e.complete()},f=function(m){return l<n?b(m):c.push(m)},b=function(m){l++;var T=!1;k(t(m,u++)).subscribe(D(e,function(G){e.next(G)},function(){T=!0},void 0,function(){if(T)try{l--;for(var G=function(){var ve=c.shift();o||b(ve)};c.length&&l<n;)G();d()}catch(ve){e.error(ve)}}))};return i.subscribe(D(e,f,function(){h=!0,d()})),function(){}}function Ue(i,e,t){return t===void 0&&(t=1/0),v(e)?Ue(function(n,r){return K(function(s,o){return e(n,s,r,o)})(k(i(n,r)))},t):(typeof e=="number"&&(t=e),L(function(n,r){return Un(n,r,i,t)}))}function kt(i){return i===void 0&&(i=1/0),Ue(Le,i)}function jn(){return kt(1)}function Ve(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];return jn()(Lt(i,ke(i)))}var Hn=["addListener","removeListener"],Fn=["addEventListener","removeEventListener"],Dn=["on","off"];function R(i,e,t,n){if(v(t)&&(n=t,t=void 0),n)return R(i,e,t).pipe(Bn(n));var r=Z(qn(i)?Fn.map(function(a){return function(c){return i[a](e,c,t)}}):zn(i)?Hn.map(Ye(i,e)):Wn(i)?Dn.map(Ye(i,e)):[],2),s=r[0],o=r[1];if(!s&&Be(i))return Ue(function(a){return R(a,e,t)})(k(i));if(!s)throw new TypeError("Invalid event target");return new w(function(a){var c=function(){for(var l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];return a.next(1<l.length?l:l[0])};return s(c),function(){return o(c)}})}function Ye(i,e){return function(t){return function(n){return i[t](e,n)}}}function zn(i){return v(i.addListener)&&v(i.removeListener)}function Wn(i){return v(i.on)&&v(i.off)}function qn(i){return v(i.addEventListener)&&v(i.removeEventListener)}function Gn(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];var t=ke(i),n=Cn(i,1/0),r=i;return r.length?r.length===1?k(r[0]):kt(n)(Lt(r,t)):yn}function Vn(i,e){return L(function(t,n){var r=0;t.subscribe(D(n,function(s){return i.call(e,s,r++)&&n.next(s)}))})}function Yn(i,e){return e===void 0&&(e=Le),i=i??Kn,L(function(t,n){var r,s=!0;t.subscribe(D(n,function(o){var a=e(o);(s||!i(r,a))&&(s=!1,r=a,n.next(o))}))})}function Kn(i,e){return i===e}function Ke(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];var t=ke(i);return L(function(n,r){(t?Ve(i,n,t):Ve(i,n)).subscribe(r)})}var H=typeof Reflect=="object"?Reflect:null,Qe=H&&typeof H.apply=="function"?H.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)},le;H&&typeof H.ownKeys=="function"?le=H.ownKeys:Object.getOwnPropertySymbols?le=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:le=function(e){return Object.getOwnPropertyNames(e)};function Qn(i){console&&console.warn&&console.warn(i)}var Bt=Number.isNaN||function(e){return e!==e};function g(){g.init.call(this)}g.EventEmitter=g;g.prototype._events=void 0;g.prototype._eventsCount=0;g.prototype._maxListeners=void 0;var Xe=10;function ge(i){if(typeof i!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof i)}Object.defineProperty(g,"defaultMaxListeners",{enumerable:!0,get:function(){return Xe},set:function(i){if(typeof i!="number"||i<0||Bt(i))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+i+".");Xe=i}});g.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};g.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Bt(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Ut(i){return i._maxListeners===void 0?g.defaultMaxListeners:i._maxListeners}g.prototype.getMaxListeners=function(){return Ut(this)};g.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r=e==="error",s=this._events;if(s!==void 0)r=r&&s.error===void 0;else if(!r)return!1;if(r){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=s[e];if(c===void 0)return!1;if(typeof c=="function")Qe(c,this,t);else for(var l=c.length,u=zt(c,l),n=0;n<l;++n)Qe(u[n],this,t);return!0};function jt(i,e,t,n){var r,s,o;if(ge(t),s=i._events,s===void 0?(s=i._events=Object.create(null),i._eventsCount=0):(s.newListener!==void 0&&(i.emit("newListener",e,t.listener?t.listener:t),s=i._events),o=s[e]),o===void 0)o=s[e]=t,++i._eventsCount;else if(typeof o=="function"?o=s[e]=n?[t,o]:[o,t]:n?o.unshift(t):o.push(t),r=Ut(i),r>0&&o.length>r&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=i,a.type=e,a.count=o.length,Qn(a)}return i}g.prototype.addListener=function(e,t){return jt(this,e,t,!1)};g.prototype.on=g.prototype.addListener;g.prototype.prependListener=function(e,t){return jt(this,e,t,!0)};function Xn(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Ht(i,e,t){var n={fired:!1,wrapFn:void 0,target:i,type:e,listener:t},r=Xn.bind(n);return r.listener=t,n.wrapFn=r,r}g.prototype.once=function(e,t){return ge(t),this.on(e,Ht(this,e,t)),this};g.prototype.prependOnceListener=function(e,t){return ge(t),this.prependListener(e,Ht(this,e,t)),this};g.prototype.removeListener=function(e,t){var n,r,s,o,a;if(ge(t),r=this._events,r===void 0)return this;if(n=r[e],n===void 0)return this;if(n===t||n.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if(typeof n!="function"){for(s=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,s=o;break}if(s<0)return this;s===0?n.shift():Jn(n,s),n.length===1&&(r[e]=n[0]),r.removeListener!==void 0&&this.emit("removeListener",e,a||t)}return this};g.prototype.off=g.prototype.removeListener;g.prototype.removeAllListeners=function(e){var t,n,r;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var s=Object.keys(n),o;for(r=0;r<s.length;++r)o=s[r],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this};function Ft(i,e,t){var n=i._events;if(n===void 0)return[];var r=n[e];return r===void 0?[]:typeof r=="function"?t?[r.listener||r]:[r]:t?Zn(r):zt(r,r.length)}g.prototype.listeners=function(e){return Ft(this,e,!0)};g.prototype.rawListeners=function(e){return Ft(this,e,!1)};g.listenerCount=function(i,e){return typeof i.listenerCount=="function"?i.listenerCount(e):Dt.call(i,e)};g.prototype.listenerCount=Dt;function Dt(i){var e=this._events;if(e!==void 0){var t=e[i];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}g.prototype.eventNames=function(){return this._eventsCount>0?le(this._events):[]};function zt(i,e){for(var t=new Array(e),n=0;n<e;++n)t[n]=i[n];return t}function Jn(i,e){for(;e+1<i.length;e++)i[e]=i[e+1];i.pop()}function Zn(i){for(var e=new Array(i.length),t=0;t<e.length;++t)e[t]=i[t].listener||i[t];return e}const er=20;class tr extends g{constructor(e=10){super(),this.setMaxListeners(e)}listenToOnce(e,t,n){e.addEventListener(t,function r(s){var o;n(),(o=s.currentTarget)==null||o.removeEventListener(s.type,r)})}createEvent(e,t){let n=new Event(e);return n.detail={value:t},n}}const y=new tr(er);function nr(){let i=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){let n=(i+Math.random()*16)%16|0;return(t=="x"?n:n&3|8).toString(16)})}class rr extends bn{constructor(e){super(1),this.name=e}next(e){e.uuid||(e.uuid=nr()),e.time||(e.time=new Date().getTime()),super.next(e)}hasObservers(){if(this.closed)throw new Error;return this.observed}unsubscribeAllObservers(){this.unsubscribe()}clean(){this._buffer=[],this.unsubscribeAllObservers()}get buffer(){return this._buffer}set buffer(e){this._buffer=e}}const ir=i=>new rr(i);class sr{constructor(e,t){this.node=e,this.subscriptions=[],this.publications=new E,this.nodeChannelData={},this.channelPrefix=t}hasSubscription(e){return this.subscriptions.filter(t=>t.channel===e).length>0}publish(e){this.publications.add(e)}getTimeFromNode(e){return this.nodeChannelData[e].interval}setTimeForNode(e,t){this.nodeChannelData[e].interval=t}getTimeFromChannel(e){var t;return(t=e==null?void 0:e.buffer)!=null&&t.length&&e.buffer.length>0?e.buffer[0].time:1}getIdFromNode(e){return this.nodeChannelData[e].id}setIdForNode(e,t){this.nodeChannelData[e].id=t}getIdFromChannel(e){var t,n;return(t=e.buffer)!=null&&t.length&&((n=e.buffer)==null?void 0:n.length)>0?e.buffer[0].uuid:null}makeCallbackWithNoReplay(e,t){this.nodeChannelData[e.name]||(this.nodeChannelData[e.name]={interval:null,id:null});const n=this;return(function(){let s=n.getTimeFromChannel(e),o=n.getTimeFromNode(e.name),a=n.getIdFromChannel(e),c=n.getIdFromNode(e.name);if(!o||o<s||o===s&&c!=a)return n.setTimeForNode(e.name,s),a&&n.setIdForNode(e.name,a),t.apply(n,arguments);n.setTimeForNode(e.name,s)}).bind(n)}subscribe(e,t,n,r){if(!this.hasSubscription(e)){let s=t,o;n===!1&&(s=this.makeCallbackWithNoReplay(e,t));let a=this._firstInstanceOfObserver(this.node,e);a===-1?o=e.subscribe(s):o=this.subscriptions[a].subscription;const c={channel:e,bind:r,node:this.node,subscription:o};this.subscriptions.push(c)}}unsubscribe(e){this.subscriptions.forEach(({channel:t,subscription:n})=>{(e===!0||!t.name.match(new RegExp(`\\b${this.channelPrefix}`)))&&n.unsubscribe()}),this.publications.unsubscribe()}_firstInstanceOfObserver(e,t){return this.subscriptions.findIndex(n=>t===n.channel&&e===n.subscription.node)}}const Wt={PARSE_ROUTE:"parse-route",AFTER_PUBLISH:"after-publish",NAV_REQUEST:"nav-request",TEMPLATE_TRANSITION_END:"template-transition-end",TRACK_EVENT:"track-event",TEMPLATE_REGISTERED:"template-registered",ROUTER_BACKSTEP:"router-backstep",LOG_EVENT:"log-event"},or=Object.values(Wt),ar="login",cr="./pages/",ye="__oc",re={externalEvents:or,externalEventsCodes:Wt,initialTemplate:ar,pagesPath:cr},lr=i=>i.trim().replace(/[_\s]+/g,"-").replace(/([A-Z])/g,"-$1").replace(/-+/g,"-").toLowerCase(),ur=["ambient","variant","disabled"],hr=(i,e,t)=>{typeof t=="boolean"?t?i.setAttribute(e,""):i.removeAttribute(e):i.setAttribute(e,t)},pr={dasherize:lr},fr=i=>i.toLowerCase().replace(/-(.)/g,function(e,t){return t.toUpperCase()});class dr{constructor(e){p(this,"_parseActionInEvent",(e,t,n)=>{let r=this._getPropertyChangedName(e.type),s,o;return r&&e.detail&&Object.prototype.hasOwnProperty.call(e.detail,"value")?(s=e.detail.value,t=t||r,e.detail.path?o=e.detail.path.replace(r,t):o=t):(o=t,s=e.detail),{path:o,value:s,property:t}});this.componentConnector=e}isUnresolved(e){const t=e.tagName.includes("-"),n=!!window.customElements.get(e.tagName.toLowerCase());return t&&!n}isInstance(e){return e.tagName.includes("-")&&!this.isUnresolved(e)}isEventAtTarget(e){const t=Event.AT_TARGET||Event.prototype.AT_TARGET;return e.eventPhase===t}dispatchActionFunction(e,t,n){const r=e.detail;typeof n=="function"?n(r):t[n]&&typeof t[n]=="function"&&t[n](r)}dispatchActionProperty(e,t,n){const r=this._parseActionInEvent(e,n,t);!ur.includes(n)&&t[n]?t[n]=r.value:hr(t,n,r.value)}_getPropertyChangedName(e){let t;const n="-changed";return e.indexOf(n,e.length-n.length)!==-1&&(t=e.slice(0,-n.length),t=fr(t)),t}}class gr{constructor(){this.channels={}}get(e){var t=this.channels[e];return t||(t=this.create(e)),t}getUnsafe(e){return this.channels[e]}create(e){const t=ir(e);return this.channels[e]=t,t}remove(e){delete this.channels[e]}getChannels(){return this.channels}setChannels(e){this.channels=e}cleanAllChannels(){for(let e in this.channels)this.channels.hasOwnProperty(e)&&this.channels[e].clean()}removeAllChannels(){for(let e in this.channels)this.channels.hasOwnProperty(e)&&delete this.channels[e]}has(e){return this.channels[e]!=null}}const{externalEventsCodes:mr}=re;class vr{constructor(e){this.adapter=new dr(this),this.manager=new gr,this.subscriptors=new Map,this.channelPrefix=e,this.bridgeChannelPrefixRegex=new RegExp(`${this.channelPrefix}_(?!ch)`)}getSubscriptor(e){let t=this.subscriptors.get(e);return t||(t=new sr(e,this.channelPrefix),this.subscriptors.set(e,t)),t}addSubscription(e,t,n,r=!1){const s=this._wrapCallbackWithNode(t,n),o=this.manager.get(e);o&&this.getSubscriptor(t).subscribe(o,s,r,n)}getChannel(e){return this.manager.get(e)}getChannels(){return this.manager.getChannels()}setChannels(e){this.manager.setChannels(e)}cleanAllChannels(){this.manager.cleanAllChannels()}updateSubscription(e,t,n,r=!1){const s=this.getSubscriptor(t);if(this.isActiveBridgeChannel(e)||!this.isActiveBridgeChannel(e)&&!this.hasSubscriptions(s,e)){const o=this.manager.get(e),a=this._wrapCallbackWithNode(t,n);s.subscribe(o,a,r,n)}}_wrapCallbackWithNode(e,t){return this.wrapCallback(e,t)}wrapCallback(e,t){const n=s=>{setTimeout(function(){"requestIdleCallback"in window?window.requestIdleCallback(s):setTimeout(s,1)},100)},r=s=>{const o=(u,h)=>{this.adapter.isUnresolved(e)?n(a):(a(),h&&h.disconnect())},a=()=>{typeof t=="function"||typeof e[t]=="function"?this.adapter.dispatchActionFunction(s,e,t):this.adapter.dispatchActionProperty(s,e,t)};if(this.adapter.isUnresolved(e)){var c=new MutationObserver(o),l={attributes:!1,childList:!0,characterData:!0};c.observe(e,l),n(a)}else a()};return Object.defineProperty(r,"node",{writable:!0,configurable:!0,enumerable:!0}),r}_hasPublisher({publications:e},t,n,r){return!!(e._subscriptions||[]).find(s=>s.node===t&&s.channelName===n&&s.eventName===r)}addPublication(e,t,n,r){if(this.isBridgeChannel(e))console.warn(`Forbidden operation. You are trying to write to a private channel (${e}).`);else{let s=this.getSubscriptor(t);if(!this._hasPublisher(s,t,e,n)){let a=this.manager.get(e);s.publish(this._wrapEvent(t,n,a,r))}}}publish(e,t){if(this.isBridgeChannel(e))console.warn(`Forbidden operation. You are trying to write to a private channel (${e}).`);else{const n=this.manager.get(e),r=`${e}-publish`;n.next(new CustomEvent(r,{detail:t}))}}unsubscribe(e,t){var a;if(!e||!t)return;const n=Array.isArray(e)?e:[e],r=this.subscriptors.get(t),s=c=>{var l,u;return((l=c.channel)==null?void 0:l.name)&&n.includes((u=c.channel)==null?void 0:u.name)},o=c=>s(c)?(c.subscription.unsubscribe(),!1):!0;r&&(r.subscriptions=(a=r.subscriptions)==null?void 0:a.filter(o))}unregisterComponent(e,t){if(!e)return;const n=this.subscriptors.get(e);n&&(n.unsubscribe(t),this.subscriptors.delete(e))}unregisterAllSubscriptors(e){this.subscriptors.forEach(t=>t.unsubscribe(e)),this.subscriptors=new Map}_wrapEvent(e,t,n,r){const{AFTER_PUBLISH:s,NAV_REQUEST:o,ROUTER_BACKSTEP:a,TRACK_EVENT:c,LOG_EVENT:l}=mr,h=R(e,t).subscribe(d=>{if(this.adapter.isEventAtTarget(d)){if(n.next(d),y.emit(s,d),r&&r.link){const f=Object.assign({},r.link);r.link.page&&r.link.page.hasOwnProperty("bind")&&(f.page=d.detail[r.link.page.bind]),r.link.cleanUntil&&r.link.cleanUntil.hasOwnProperty("bind")&&(f.cleanUntil=d.detail[r.link.cleanUntil.bind]),y.emit(o,{event:d,detail:f})}r&&r.backStep&&y.emit(a,{event:d,detail:{}}),r&&r.analytics&&y.emit(c,{event:d,detail:r.analytics}),r&&r.log&&y.emit(l,{event:d,detail:r.log})}});return Object.defineProperty(h,"node",{value:e,writable:!0,configurable:!0,enumerable:!0}),Object.defineProperty(h,"eventName",{value:t,writable:!0,configurable:!0,enumerable:!0}),Object.defineProperty(h,"channelName",{value:n.name,writable:!0,configurable:!0,enumerable:!0}),Object.defineProperty(h,"options",{value:r,writable:!0,configurable:!0,enumerable:!0}),h}createEvent(e,t){const n=new Event(e);return n.detail={value:t},n}isActiveBridgeChannel(e){return this.manager.getUnsafe(e)?this.isBridgeChannel(e):!1}isBridgeChannel(e){return this.bridgeChannelPrefixRegex.test(e)}hasSubscriptions(e,t){return!!e.subscriptions.find(n=>n.channel.name===t)}}const S=class S{constructor(e,t,n,r=!1,s=void 0){p(this,"name","");p(this,"params",{});p(this,"patterns",[""]);p(this,"regexps");p(this,"redirectPage",null);p(this,"isAccessible",!0);p(this,"isWildcarded",!1);this.name=e,this.patterns=typeof t=="string"?[t]:t,this.action=n,this.notFound=r,this.component=s,this.regexps=this.patterns.map(o=>this._getRegExp(o))}_getRegExp(e){let t=e,n="/*",r="$";const s=t.indexOf("*");s>=0&&(this.isWildcarded=!0,t=t.substring(0,s),n="/+",r="");let o=t.replace(S.PARAM,"([^/]+)").replace(S.TRAILING_SLASHES,n);return new RegExp("^"+o+r)}path(e){e=e||{},this.params={};let t,n=this.patterns[0];for(;(t=S.PARAM.exec(this.patterns[0]))!==null;)n=n.replace(t[0],""+e[t[1]]),this.params[t[1]]=e[t[1]];const r=[];for(let s in e)this.params.hasOwnProperty(s)||r.push(s+"="+encodeURIComponent(e[s]));return r.length&&(n+="?"+r.join("&")),n}matchPath(e){let t=null;return this.regexps.forEach((n,r)=>{let s=e.match(n);s&&(t={index:r,regex:this.regexps[r],pattern:this.patterns[r],parts:s})}),t}parsePath(e){let t=this.matchPath(e);if(this.params={},this.subroute=void 0,t){let n=1,r;for(t.parts[0]!==t.parts.input&&(this.subroute=t.parts.input.substring(t.parts[0].length-1));(r=S.PARAM.exec(t.pattern))!==null;)this.params[r[1]]=this._parseParam(t.parts[n]),n++}}parseQuery(e){this.query=e;for(let t in this.query)this.query.hasOwnProperty(t)&&(this.params[t]=this.query[t])}is404(){return this.notFound===!0}_isNumber(e){return parseInt(e)+""===e||parseFloat(e)+""===e}_parseParam(e){return this._isNumber(e)?+e:e}handler(){}};p(S,"PARAM",/(?::([^/]+))/g),p(S,"TRAILING_SLASHES",/\/*$/);let Oe=S;class br{constructor(){this.navStack=[],this.skipNav={}}get length(){return this.navStack.length}addSkipNavigation(e){(e.skipHistory===!0||e.skipHistory===!1)&&(this.skipNav[`${e.from}:${e.to}`]=e.skipHistory)}_reverseNavigation(e){return{from:e.to,to:e.from}}isSkipNavigation(e){return this.skipNav[`${e.from}:${e.to}`]===!0}lastNavigation(){const e=this.navStack.length;let t,n;return e===1?n=this.navStack[0]:e>1&&(n=this.navStack[e-1],t=this.navStack[e-2]),this.createNavigation(t,n)}createRoute(e,t={}){return{page:e,params:t}}createNavigation(e,t){return{from:e?e.page:void 0,to:t?t.page:void 0}}push(e){var t;(!this.top()||((t=this.top())==null?void 0:t.page)!==e.page)&&this.navStack.push(e)}replace(e){var t;(!this.top()||((t=this.top())==null?void 0:t.page)!==e.page)&&(this.navStack[this.navStack.length-1]=e)}pop(){return this.navStack.pop()}top(){return this.navStack.length>0?this.navStack[this.navStack.length-1]:void 0}isBackwardNavigation(e){const t=this.lastNavigation();return t&&e.from===t.to&&e.to===t.from}update(e,t){const n=this.createNavigation(e,t);if(this.isBackwardNavigation(n)){for(;this.isSkipNavigation(this._reverseNavigation(this.lastNavigation()));)this.pop();this.pop()}else this.push(t);return this.top()}clear(){this.navStack=[]}replaceRoute(e){this.navStack.length>0?this.navStack[this.navStack.length-1]=e:this.push(e)}clearUntil(e){if(this.navStack.find(t=>t.page===e)){let t=null;do t=this.navStack.pop();while(t&&t.page!=e)}}}const Je=E.EMPTY,{externalEventsCodes:yr}=re;let _e=null,Ze=!1,et={},B,Ce,V;class _r extends E{constructor(){super(),this._currentSubscription=Je}add(e){if(this.closed)return;const t=new E(e);this._currentSubscription&&(this.remove(this._currentSubscription),this._currentSubscription.unsubscribe(),this._currentSubscription=Je),this._currentSubscription=t,super.add(e)}}const C=class C{constructor(){p(this,"navigationStack");p(this,"_channelManager",null);p(this,"interceptorContext",{});const{TEMPLATE_TRANSITION_END:e}=yr;return _e||(_e=this),this.navigationStack=this._createNavigationStack(),y.on(e,()=>{this.isNavigationInProgress=!1}),_e}_createNavigationStack(){return new br}set useHistory(e){C.SUPPORTS_HISTORY_API&&(Ze=e)}get useHistory(){return Ze}set channelManager(e){this._channelManager=e}get channelManager(){return this._channelManager}set routes(e){et=e}get routes(){return et}get currentRoute(){return Ce}set currentRoute(e){Ce=e}handler(e){}addRoute(e,t,n,r,s){return this.routes[e]=new Oe(e,t,n,r,s),this.routes[e]}addRoutes(e){if(!e)throw new Error("Routes must be defined");for(let t in e)if(e.hasOwnProperty(t)){const{path:n,action:r,notFound:s,component:o}=e[t];this.addRoute(t,n,r,s,o)}}addSkipNavigations(e){for(let t=0;t<e.length;t++)this.navigationStack.addSkipNavigation(e[t])}_getHashPath(){return location.hash.replace(C.HASH_PREFIX,"/").replace(C.EMPTY,"/")}_observeHashChange(){return R(window,"hashchange").pipe(K(this._getHashPath),Ke(this._getHashPath()))}_getURLPath(){return location.pathname.replace(C.PATH_PREFIX,"/")}_observeStateChange(){return Gn(R(window,"popstate"),R(window,"pushstate")).pipe(K(this._getURLPath),Ke(this._getURLPath()))}matchRoute(e){const[t,n]=e.split("?"),r=this._parseQuery(n);for(let s in this.routes)if(this.routes.hasOwnProperty(s)){const o=this.routes[s];if((!o.is404()||o.isAccessible)&&o.matchPath(t))return o.isWildcarded?o.parsePath(e):(o.parsePath(t),o.parseQuery(r)),o}}_parseQuery(e){const t={};if(e){const n=e.split("&");if(n){let r,s,o,a=n.length;for(o=0;o<a;o++)[r,s]=n[o].split("="),t[r]=decodeURIComponent(s)}}return t}_setup404(){const e=Object.values(this.routes).find(t=>t.is404())||null;return e&&e.patterns.length===1&&(this.getRouteWithPattern(e.patterns[0]),e.redirectPage=e.name,e.isAccessible=!0),e}getRouteWithPattern(e){for(let t in this.routes)if(this.routes.hasOwnProperty(t)){let n=this.routes[t];if(!n.is404()&&n.patterns.includes(e))return n}return null}interceptor(e,t){return{intercept:!1}}intercept(e,t){const n={from:{page:e.page,params:e.params},to:{page:t.name,path:t.patterns[0],params:t.params}};return{...this.interceptor(n,this.interceptorContext),...n}}updateInterceptorContext(e){this.interceptorContext=Object.assign({},this.interceptorContext,e)}setInterceptorContext(e){this.interceptorContext=Object.assign({},e)}getInterceptorContext(){return Object.assign({},this.interceptorContext)}start(){if(!B){const e=new _r;V=this._setup404(),(this.useHistory?this._observeStateChange():this._observeHashChange()).pipe(Yn(),K(this.matchRoute.bind(this)),Vn(r=>{var s;return r&&r.name===this.cancelledNavigation?(this.cancelledNavigation=void 0,this.isNavigationInProgress=!1,this.currentRoute.name!==((s=this.navigationStack.top())==null?void 0:s.page)&&this.navigationStack.push({page:this.currentRoute.name,params:this.currentRoute.params}),!1):!0})).forEach(r=>{var s,o,a;if(this.hashIsDirty)this.hashIsDirty=!1;else if(r){const c=(s=this.currentRoute)==null?void 0:s.name,l=(o=this.currentRoute)==null?void 0:o.params,u=this.navigationStack.createRoute(c,l),h=this.navigationStack.createRoute(r.name,r.params),d=this.intercept(u,r);if(d.intercept){this.isNavigationInProgress=!1,d.redirect?this.goReplacing(d.redirect.page,d.redirect.params):(this.go(c,l,!1),this.cancelledNavigation=c),this.channelManager&&setTimeout(()=>{var T;const m={from:{page:d.from.page,params:d.from.params},to:{page:d.to.page,params:d.to.params}};(T=this.channelManager)==null||T.publishInterceptedNavigation(m)},0);return}else{const m=(a=this.navigationStack.update(u,h))==null?void 0:a.page;if(m&&m!==h.page){this.go(m,void 0,!1);return}}Ce=r;const f=new E(()=>this.currentRoute),b=()=>f.unsubscribe();e.add(b),this.currentRoute.handler(),this.handler(this.currentRoute)}else V!=null&&V.redirectPage&&this.goReplacing(V.redirectPage)}),B=e}return B}stop(){B&&(B.unsubscribe(),B=null),this.isNavigationInProgress=!1,this.hashIsDirty=!1}destroy(){this.stop(),this.routes={}}getPath(e,t){const n=this.routes[e];if(n){let r;const s=n.path(t),o=s.indexOf("?");if(o>-1){const a=s.substring(0,o),c=s.substring(o);r=a.replace(/\*/g,"")+c}else r=s.replace(/\*/g,"");return r}else{console.error("Wrong route name: %s, valid route names: %s",e,Object.keys(this.routes).join(", "));return}}newNavigation(e){return{from:this.currentRoute?this.currentRoute.name:void 0,to:e}}reverseNavigation(e){return{from:e.to,to:e.from}}go(e,t=void 0,n=!1,r=!1){if(this.isNavigationInProgress)return;if(r!==void 0){const a=this.newNavigation(e),c=this.reverseNavigation(a);c.skipHistory=r,this.navigationStack.addSkipNavigation(c)}const s=e.replace(C.LTRIM_SLASH,""),o=this.getPath(s,t);o&&o!==this._getHashPath()&&(this.isNavigationInProgress=!0,this.updatePathInBrowser(o,n))}back(){const e={};if(this.navigationStack.length>1){let t=this.navigationStack.pop(),n=t,r=this.getLastRoute();for(;this.navigationStack.isSkipNavigation({from:n==null?void 0:n.page,to:r==null?void 0:r.page})&&this.navigationStack.length>1;)n=this.navigationStack.pop(),this.navigationStack.length>0&&(r=this.getLastRoute());const s=r==null?void 0:r.page,o=r==null?void 0:r.params;if(e.from=t,e.to=r,s)this.go(s,o);else throw new Error("No page to go back to")}else e.from=this.getLastRoute(),e.to=this.getLastRoute();return e}updatePathInBrowser(e,t){this.useHistory?t?this.historyReplaceState(e):this.historyPushState(e):t?this.locationReplace(e):this.locationHash(e)}updateSubrouteInBrowser(e){const t=this.currentRoute;let n=this.getPath(t.name,t.params);n&&(e&&(n!=null&&n.endsWith("/")&&(n=n.substring(0,n.length-1)),n=n+e),this.updatePathInBrowser(n,!0),this.hashIsDirty=!0)}goReplacing(e,t=void 0){this.go(e,t,!0)}historyReplaceState(e){history.replaceState(null,"",e)}historyPushState(e){history.pushState(null,"",e)}locationReplace(e){location.replace("#!"+e)}locationHash(e){location.hash="#!"+e}getLastRoute(){return this.navigationStack.top()}init(){this._clearStack()}_clearStack(){this.navigationStack.clear()}clearStackUntil(e){this.navigationStack.clearUntil(e)}};p(C,"SUPPORTS_HISTORY_API",window.history&&"pushState"in window.history),p(C,"PARAM",/(?::([^/]+))/g),p(C,"LTRIM_SLASH",/^\/(\b)/),p(C,"EMPTY",/^$/),p(C,"HASH_PREFIX",/^#!?\/*/),p(C,"PATH_PREFIX",/^\/*/),p(C,"isNavigationInProgress",!1),p(C,"cancelledNavigation"),p(C,"hashIsDirty",!1);let Ie=C;class Cr{constructor(e){p(this,"type","TEMPLATE");if(e.node)this.node=e.node;else if(e.tagName)this.node=document.createElement(e.tagName);else throw new Error("Template must have a node or a tagName");this.name=""}getZone(e){const t=this.node;let n;return e?n=t.querySelector("#"+e):n=t,n||t}cache(){this._setAttribute("state","cached")}activate(){this._setAttribute("state","active")}deactivate(){this._setAttribute("state","inactive")}_setAttribute(e,t){const n=this._getTemplate(this.node);try{n.setAttribute(e,t)}catch{throw new Error(`${this.node.tagName.toLowerCase()} has no valid template. Template was ${n}`)}}_getAttribute(e){const t=this._getTemplate(this.node);let n="";try{n=t.getAttribute(e)||""}catch{throw new Error(`${this.node.tagName.toLowerCase()} has no valid template. Template was ${t}`)}return n}_getTemplate(e){const{tagName:t}=e;return t.toLowerCase().endsWith("-page")&&this._getTemplateFromPage(e)||e}_getTemplateFromPage(e){const t=e.shadowRoot&&e.shadowRoot.childNodes?e.shadowRoot.childNodes:e.children;return Array.from(t).filter(r=>r instanceof HTMLElement).find(r=>r.tagName&&(r.tagName.toLowerCase().indexOf("cells-template")!==-1||r.getAttribute("data-cells-type")==="template"))}config(e){const{name:t,template:{id:n,name:r}}=e;this.name=t,this.node.id=n,this.node.name=r}}const{externalEventsCodes:wr}=re;class Er{constructor(e={}){p(this,"cache",{});p(this,"templates",{});p(this,"selected","");p(this,"locations",[]);p(this,"size",0);p(this,"fixedTemplates",["__cross"]);const t=e.persistentPages||[];this.viewLimit=e.viewLimit&&e.viewLimit>=1?e.viewLimit:3,this.fixedTemplates=this.fixedTemplates.concat(t),this.maxSize=this.viewLimit+this.fixedTemplates.length}createTemplate(e,t){let n=this.get(e);return n||(n=this._createTemplate(e,t),this._storeTemplate(e,n)),n}_createTemplate(e,t){const n=new Cr(t),r=this._createTemplateConfig(e);return n.config(r),n}_createTemplateConfig(e){return{name:e,template:{id:this.computeTemplateId(e),name:e}}}_storeTemplate(e,t){const{node:n}=t;if(this.size>=this.maxSize){const r=this._getOlderRemovableTemplate();r?this.removeTemplate(r):console.warn("No space left in template cache for template ",e)}this.locations.push(e),this.cache[e]=t,this.templates[e]=n,this.size++}_getOlderRemovableTemplate(){let e=!1,t;for(let n=0;!e&&n<this.locations.length;n++)this.fixedTemplates.indexOf(this.locations[n])==-1&&(t=this.locations[n],e=!0);return t}get(e){return this.cache[e]}getNode(e){return this.templates[e]}parseTemplateName(e){return e}computeTemplateId(e){return"cells-template-"+e.replace(/\./g,"-")}select(e){const{TEMPLATE_TRANSITION_END:t}=wr,n=this.get(e),r=this.cache;for(let s in r)r.hasOwnProperty(s)&&(s===this.selected?r[s].deactivate():e!==s&&r[s].cache());this.selected=e,n.activate(),y.emit(t,n)}removeTemplate(e){if(this.templates[e]){const t=document.querySelector("#"+this.templates[e].id);if(!t)throw new Error(`Template ${e} node not found`);const n=this.locations.indexOf(e);if(this.locations.splice(n,1),!t.parentNode)throw new Error(`Template ${e} has no parent node`);t.parentNode.removeChild(t),delete this.templates[e],delete this.cache[e],this.size--}}removeTemplates(e,t){for(let n in this.templates)this.templates.hasOwnProperty(n)&&n!==e&&n!==t&&this.removeTemplate(n)}removeTemplateChildrens(e){const t=this.templates[e];if(t)for(;t.firstChild;)t.removeChild(t.firstChild)}}class Sr{constructor(e){this.componentConnector=e.ComponentConnector,this.privateChannels=new Set,this.channelPrefix=e.channelPrefix}getAppContextChannelName(){return`${this.channelPrefix}_app`}getCancelledBackNavigationChannelName(){return`${this.channelPrefix}_cancelled_back_navigation`}getInterceptedNavigationChannelName(){return`${this.channelPrefix}_intercepted_navigation`}getPrivateChannelPrefix(){return`${this.channelPrefix}_page_`}getEventChannelPrefix(){return`${this.channelPrefix}_evt_`}getBridgeChannelPrefix(){return`${this.channelPrefix}_ch_`}getPostMessageChannelPrefix(){return`${this.channelPrefix}_post_message_`}getBridgeChannel(e){return this.componentConnector.getChannel(this.getBridgeChannelPrefix()+e)}getAppContextChannel(){return this.componentConnector.getChannel(this.getAppContextChannelName())}getCancelledBackNavigationChannel(){return this.componentConnector.getChannel(this.getCancelledBackNavigationChannelName())}getInterceptedNavigationChannel(){return this.componentConnector.getChannel(this.getInterceptedNavigationChannelName())}getPrivate(e){const t=this.getPrivateChannelPrefix()+e,n=this.componentConnector.getChannel(t);return this.privateChannels.add(t),n}getPostMessageChannel(e){const t=this.getPostMessageChannelPrefix()+e;return this.componentConnector.getChannel(t)}initAppContextChannel(){this.getAppContextChannel()}initCancelledBackNavigationChannel(){this.getCancelledBackNavigationChannel()}initPrivateChannel(e,t){this.publishPrivatePageStatus(t,!0),e&&this.publishPrivatePageStatus(e,!1)}publishPrivatePageStatus(e,t){const n=this.getPrivate(e),r=y.createEvent("page-load",t);n.next(r)}updateAppContext(e,t,n,r){const s=y.createEvent("app-context",{currentPage:t,fromPage:e,interceptorContext:n,currentRoute:r});this.getAppContextChannel().next(s)}updateBridgeChannels(e,t,n,r){this.updateAppContext(e,t,n,r),this.initPrivateChannel(e,t)}publishCancelledBackNavigation(e){const t=y.createEvent("back-nav-cancelled",e);this.getCancelledBackNavigationChannel().next(t)}publishInterceptedNavigation(e){const t=y.createEvent("intercepted-navigation",e);this.getInterceptedNavigationChannel().next(t)}isPrivateChannel(e){return e.indexOf(this.getPrivateChannelPrefix())===0}isActivePrivateChannel(e){return this.privateChannels.has(e)}resetBridgeChannels(e,t){Object.keys(this.componentConnector.getChannels()).forEach(r=>{let s=this.componentConnector.getChannel(r);s.clean(),s.unsubscribe()}),this.componentConnector.unregisterComponent(e,t),this.componentConnector.unregisterAllSubscriptors(t),this.componentConnector.cleanAllChannels()}getCCSubscriptions(e,t){const n=Array.from(this.componentConnector.subscriptors.values()).filter(o=>{var a,c;return((a=o.node.parentNode)==null?void 0:a.id)===e||((c=o.node.parentNode)==null?void 0:c.id)===t||o.node.id===t}),r=n.map(o=>{var a,c;return(c=(a=o.publications)==null?void 0:a._subscriptions)==null?void 0:c.map(l=>({channel:l.channelName||"",bind:l.eventName||"",component:o.node,options:void 0}))}).filter(o=>o!==void 0).reduce((o,a)=>o==null?void 0:o.concat(a||[]),[])||[];return{inConnections:n.map(o=>{var a;return(a=o.subscriptions)==null?void 0:a.map(c=>({channel:c.channel.name,bind:c.bind,component:o.node}))}).filter(o=>o!==void 0).reduce((o,a)=>o.concat(a),[]),outConnections:r}}initEventChannels(e,t){t.forEach(n=>{const s=this.getEventChannelPrefix()+n,o=this.componentConnector.getChannel(s);R(e,n).subscribe(c=>o.next(c))})}subscribeToEvent(e,t,n){const s=this.getEventChannelPrefix()+t,o=this.componentConnector.getSubscriptor(e),a=this.componentConnector.getChannel(s),c=n;Object.defineProperty(c,"node",{writable:!0,configurable:!0,enumerable:!0}),o.subscribe(a,c,!1,"")}}const{externalEventsCodes:Ar}=re;class Pr{constructor(e){this.bridge=e,this.ChannelManager=e.BridgeChannelManager,this.TemplateManager=e.TemplateManager}subscribeAll(){this.ChannelManager.getBridgeChannel("config").subscribe(e=>this._configSubscriptor(e)),this.ChannelManager.getBridgeChannel("locales").subscribe(e=>this._localesSubscriptor(e)),this.ChannelManager.getBridgeChannel("logout").subscribe(e=>this._logoutSubscriptor()),this.ChannelManager.getBridgeChannel("interceptor_context").subscribe(e=>this._appContextSubscriptor(e))}updateProperty(e,t){this.isAllowedProperty(e)&&(this.bridge[e]=t,window.AppConfig&&(window.AppConfig[e]=t))}isAllowedProperty(e){return typeof this.bridge[e]!="function"}_configSubscriptor(e){const{TEMPLATE_REGISTERED:t}=Ar,n=this.TemplateManager.selected;if(e.detail){for(let r in e.detail)e.detail.hasOwnProperty(r)&&this.updateProperty(r,e.detail[r]);(e.detail.app||e.detail.pagesPath)&&(this.TemplateManager.removeTemplates(n,this.bridge.crossContainerId),y.once(t,()=>this.TemplateManager.removeTemplate(n)))}}_localesSubscriptor(e){window.I18nMsg&&e.detail&&e.detail.lang&&(window.I18nMsg.lang=e.detail.lang)}_logoutSubscriptor(){this.bridge.logout()}_appContextSubscriptor(e){const t=e.detail;this.bridge.setInterceptorContext(t)}}class xr{constructor(e){this.enabled=!1,this.postMessageTargetOrigin="",e.postMessageTargetOrigin?e.postMessageTargetOrigin==="*"?(this.enabled=!1,console.warn("For security reasons postMessageTargetOrigin can't be the wildcard '*'. See docs for more info. ")):(this.enabled=!0,this.postMessageTargetOrigin=e.postMessageTargetOrigin):this.enabled=!1,this.componentConnector=e.ComponentConnector,this.bridgeChannelManager=e.BridgeChannelManager,this.channelPrefix=e.channelPrefix}setupPostMessages(){this.enabled&&(window.addEventListener("message",({data:e})=>{if(e.event){const t=this.bridgeChannelManager.getPostMessageChannel(e.event),n=this.componentConnector.createEvent(e.event,e.detail);t.next(n)}}),this._sendPostMessage({event:`${this.channelPrefix}-ready`}),this.bridgeChannelManager.getBridgeChannel("send_post_message").subscribe(e=>this._sendPostMessage(e.detail)))}_sendPostMessage(e){window.parent&&window.parent.postMessage({eventName:e.event,eventDetail:e.detail},this.postMessageTargetOrigin)}}class Tr{constructor(){p(this,"dictionary",{})}getItem(e){return this.dictionary[e]||null}setItem(e,t){this.dictionary[e]=t}removeItem(e){delete this.dictionary[e]}}class qt{constructor(e){p(this,"prefix","");p(this,"persistent",!1);p(this,"internalStorage",new Tr);Object.assign(this,e),this.persistent&&this.clear()}get storage(){let e;try{e=this.persistent?window.localStorage:window.sessionStorage,e.setItem("_$_",JSON.stringify({}))}catch{e=this.internalStorage}return e}getItem(e){return JSON.parse(this.storage.getItem(this.prefix+e))}setItem(e,t){this.storage.setItem(this.prefix+e,JSON.stringify(t))}clear(){var e=new RegExp("^("+this.prefix+")");for(let t in this.storage)this.storage.hasOwnProperty(t)&&e.test(t)&&this.storage.removeItem(t)}}const $r="__app_",tt="config";class Or{constructor({ActionChannelManager:e}){this.ActionChannelManager=e,this.storage=this._getAppConfigStorage()}_getAppConfigStorage(){return new qt({prefix:$r,persistent:!1})}saveAppConfig(e){const t={};for(let n in e)e.hasOwnProperty(n)&&this.ActionChannelManager.isAllowedProperty(n)&&(t[n]=e[n]);Object.keys(t).length>0&&this.storage.setItem(tt,t)}loadAppConfig(){const e=this.storage.getItem(tt);for(let t in e)e.hasOwnProperty(t)&&this.ActionChannelManager.updateProperty(t,e[t])}}const Ir="__app_",we="state";class Rr{constructor({ComponentConnector:e}){this.ComponentConnector=e,this.storage=this._getAppStateStorage()}_getAppStateStorage(){return new qt({prefix:Ir,persistent:!1})}saveAppState(e,t){const n=this.storage.getItem(we);n&&(n[e]=t,this.storage.setItem(we,n))}loadAppState(){const e=this.storage.getItem(we);for(let t in e)this.ComponentConnector.publish(t,e[t])}}const{dasherize:Nr}=pr;window.cellsBridgeQueue=window.cellsBridgeQueue||[];let P=null,Re=window.cellsBridgeQueue;const Mr=function(i){return P||new Hr(i),P},Lr=function(i,e){Re.push({command:i,parameters:e})},{externalEvents:kr,externalEventsCodes:oe,initialTemplate:Br,pagesPath:Ur}=re,jr={};class Hr{constructor(e){p(this,"cache",!0);p(this,"channel","global");p(this,"crossContainerId","__cross");p(this,"debug",!0);p(this,"preCache",!1);p(this,"storagePrefix",`${ye}-`);p(this,"version","__VERSION__");p(this,"viewLimit",1e3);p(this,"initialTemplate",Br);p(this,"__mainNodeElement",null);p(this,"mainNode");p(this,"externalEvents",kr);p(this,"pagesPath",Ur);p(this,"navRequestListener");p(this,"ComponentConnector");p(this,"TemplateManager");p(this,"Router");p(this,"BridgeChannelManager");p(this,"ActionChannelManager");p(this,"PostMessageManager");p(this,"ApplicationConfigManager");p(this,"ApplicationStateManager");p(this,"interceptor");p(this,"skipNavigations");p(this,"eventSubscriptions");p(this,"postMessageTargetOrigin");p(this,"commonPages");e&&typeof e=="object"&&Object.assign(this,e),this.mainNode||console.warn("You should indicate the main node of your app"),this.channelPrefix||(this.channelPrefix=ye),this.storagePrefix=`${this.channelPrefix}-`,this._initializeManagers(),this._initializeDebug(),this._initializeRouter(),this._initializeBridgeStatus(),this._initializeEventListeners(),this.PostMessageManager.setupPostMessages(),this._initCrossComponents(),this._plugExternalEvents(),this._lazyLoadPages(this.commonPages||[])}_initializeManagers(){this.ComponentConnector=new vr(this.channelPrefix),this.TemplateManager=new Er(this),this.Router=new Ie,this.BridgeChannelManager=new Sr(this),this.ActionChannelManager=new Pr(this),this.PostMessageManager=new xr(this),this.ApplicationConfigManager=new Or(this),this.ApplicationStateManager=new Rr(this),this.channel==="global"&&this.ComponentConnector.setChannels(jr)}_initializeDebug(){this.debug?(P=this,window.$bridge=P):P={logout:()=>this.logout(),subscribeToEvent:(e,t)=>this.subscribeToEvent(e,t),registerInConnection:(e,t,n)=>this.registerInConnection(e,t,n),unsubscribe:(e,t)=>this.unsubscribe(e,t),registerOutConnection:(e,t,n,r)=>this.registerOutConnection(e,t,n,r),publish:(e,t,n)=>this.publish(e,t,n),updateSubroute:e=>this.updateSubroute(e),getCurrentRoute:()=>this.getCurrentRoute(),navigate:(e,t)=>this.navigate(e,t),updateApplicationConfig:(e,t)=>this.updateApplicationConfig(e,t),updateInterceptorContext:e=>this.updateInterceptorContext(e),resetInterceptorContext:()=>this.resetInterceptorContext(),getInterceptorContext:()=>this.getInterceptorContext(),setInterceptorContext:e=>this.setInterceptorContext(e)}}_initializeRouter(){if(this.interceptor&&typeof this.interceptor=="function"&&(this.Router.channelManager=this.BridgeChannelManager,this.Router.interceptor=this.interceptor),this.Router.handler=()=>this.routeHandler(),Array.isArray(this.routes)&&(this.routes=this._parseRoutes(this.routes)),this.Router.addRoutes(this.routes),this.skipNavigations&&this.skipNavigations.length>0){for(let e=0;e<this.skipNavigations.length;e++)this.skipNavigations[e].skipHistory=!0;this.Router.addSkipNavigations(this.skipNavigations)}this.Router.start()}_initializeBridgeStatus(){this.BridgeChannelManager.initAppContextChannel(),this.BridgeChannelManager.getCancelledBackNavigationChannel(),this.BridgeChannelManager.getInterceptedNavigationChannel(),this.ActionChannelManager.subscribeAll(),this._executePendingBridgeQueue(),this.ApplicationConfigManager.loadAppConfig(),this.ApplicationStateManager.loadAppState()}_initializeEventListeners(){const{NAV_REQUEST:e,ROUTER_BACKSTEP:t}=oe;this.navRequestListener=n=>{this.Router.hashIsDirty&&(window.location.hash="#!");const{event:r,detail:s}=n;let{page:o,params:a,skipHistory:c,cleanUntil:l,replace:u=!1,paramPage:h}=s,d={};if(!o&&h&&r.detail&&(o=r.detail[h]),r.detail&&a)for(let f in a)r.detail.hasOwnProperty(f)&&(d[a[f]]=r.detail[f]);l&&this.Router.clearStackUntil(l),this.Router.go(o,d,u,c)},y.on(e,this.navRequestListener),y.on(t,this.handleBack.bind(this))}updateInterceptorContext(e){this.Router.updateInterceptorContext(e)}resetInterceptorContext(){this.Router.setInterceptorContext({})}getInterceptorContext(){return this.Router.getInterceptorContext()}setInterceptorContext(e){this.Router.setInterceptorContext(e)}goBack(){return this.Router.back()}handleBack(){this.goBack()}_executePendingBridgeQueue(){let e;e=Re,Array.isArray(e)&&(e.forEach(({command:t,parameters:n})=>{const r=this[t];if(!r){console.log(`WARNING: Invalid cells bridge command execution: ${t} (QUEUE).`);return}const s=r;console.log(`Executing queued command ${t}.`),s.apply(this,n)}),Re=[],delete window.cellsBridgeQueue)}_dispatchEvent(e,t){const n=this.getMainNode();if(!n)throw new Error("The defined main node does not exist");const r=t?new CustomEvent(e,{detail:t}):new CustomEvent(e);n.dispatchEvent(r)}_plugExternalEvents(){let e=this.externalEvents.length;if(this.getMainNode()){for(let n=0;n<e;n++){const r=this.externalEvents[n];y.on(r,s=>{this._dispatchEvent(r,s)})}this._initEventChannels()}else console.warn("The defined main node does not exist")}_initEventChannels(){let e=this.getMainNode();this.BridgeChannelManager.initEventChannels(e,this.externalEvents),this._addInitialSubscribersToEvents()}_addInitialSubscribersToEvents(){this.eventSubscriptions&&this.eventSubscriptions.length>0&&this._subscribeToEvents(this.eventSubscriptions)}_subscribeToEvents(e){e.forEach(t=>{const{event:n,callback:r}=t;this.subscribeToEvent(n,r)})}_initCrossComponents(){const e=this.TemplateManager.computeTemplateId(this.crossContainerId);let t=this.TemplateManager.get(e);const n=document.getElementById(e);t||(n?(this.usingDeclarativeCrossContainer=!0,this.TemplateManager.createTemplate(this.crossContainerId,{node:n})):(t=this.TemplateManager.createTemplate(this.crossContainerId,{tagName:"div"}),document.body.appendChild(t.node)))}_insideLayout(e){return e!=null&&e.split(".").length===2}createPageFromWebComponent(e,t){const n=t||`${e}-page`,r=this.TemplateManager.getNode(n);this.BridgeChannelManager.getPrivate(e);const s=o=>{const a=o.tagName.includes("-"),c=!!window.customElements.get(o.tagName.toLowerCase());return a&&!c};if(!r){const o=this.TemplateManager.createTemplate(e,{tagName:n});if(s(o.node)&&this.loadCellsPage)return this.loadCellsPage(e)}return Promise.resolve()}computeTemplateId(e){return"cells-template-"+e.replace(/\./g,"-")}printDebugInfo(){const e=function(t,n){return`background:${t?n:"#b0bec5"}; color:#fff; padding:2px 4px; margin-right: 5px;`};console.log(`%cbridge version: ${this.version} %ccache: ${this.cache}`,e(this.version,"#003f8d"),e(this.cache,"#0093e2"))}routeHandler(){const{PARSE_ROUTE:e}=oe,t=this.Router.currentRoute;y.emit(e,t),this._handleRouteLoading(t);for(let n in t.params){const r=y.createEvent(Nr(n)+"-changed",t.params[n]);this.ComponentConnector.getChannel(n).next(r)}}_handleRouteLoading(e){this.createPageFromWebComponent(e.name,e.component).then(()=>this.selectPage(e.name,e.params))}_updateChannels(e,t){if(this.BridgeChannelManager){const n=e?e.name:void 0,r=this.getInterceptorContext(),s=this.getCurrentRoute();this.BridgeChannelManager.updateBridgeChannels(n,t.name,r,s)}}registerInConnection(e,t,n){this.ComponentConnector.addSubscription(e,t,n)}registerOutConnection(e,t,n,r){this.ComponentConnector.addPublication(e,t,n,r)}unsubscribe(e,t){this.ComponentConnector.unsubscribe(e,t)}publish(e,t,{sessionStorage:n}={sessionStorage:!1}){this.ComponentConnector.publish(e,t),n===!0&&this.ApplicationStateManager.saveAppState(e,t)}updateApplicationConfig(e,{sessionStorage:t}={}){const n=`${ye}_ch_config`;this.publish(n,e),t===!0&&this.ApplicationConfigManager.saveAppConfig(e)}updateSubroute(e){this.Router.updateSubrouteInBrowser(e)}getCurrentRoute(){const{name:e,params:t,query:n,subroute:r}=this.Router.currentRoute;return{name:e,params:t,query:n,subroute:r,hashPath:this.Router._getHashPath()}}navigate(e,t){this.Router.go(e,t)}backStep(){const{ROUTER_BACKSTEP:e}=oe;y.emit(e,{event:{},detail:{}})}_waitRenderComplete(e){return e.node.updateComplete||Promise.resolve(!0)}selectPage(e,t){const{TEMPLATE_REGISTERED:n}=oe,r=this.TemplateManager.get(e),s=this.TemplateManager.get(this.TemplateManager.selected),o=s?s.name:void 0;this.onRender&&this.onRender(r.node),(async()=>{await this._waitRenderComplete(r),this._handleParams(r.node,t);const a=this.getInterceptorContext(),c=this.getCurrentRoute();this.TemplateManager.select(e),this.BridgeChannelManager&&this.BridgeChannelManager.updateBridgeChannels(o,e,a,c),y.emit(n,{template:e})})()}_handleParams(e,t){e.params&&(e.params=Object.keys(t).length>0?t:{})}subscribeToEvent(e,t){if(this.externalEvents.indexOf(e)<0){console.warn("Trying to subscribe to a non existing event: ",e);return}if(typeof t!="function"){console.warn("You must provide a function callback to subscribe to the event: ",e);return}let n=this.getMainNode();this.BridgeChannelManager.subscribeToEvent(n,e,t)}getMainNode(){if(this.__mainNodeElement||(this.__mainNodeElement=document.querySelector("#"+this.mainNode)),!this.__mainNodeElement)throw new Error("The defined main node does not exist");return this.__mainNodeElement}_disconnectCrossComponents({inConnections:e,outConnections:t},n){e==null||e.forEach(r=>{this.ComponentConnector.unregisterComponent(r.component,n)}),t==null||t.forEach(r=>{this.ComponentConnector.unregisterComponent(r.component,n)})}_reconnectCrossComponents({inConnections:e,outConnections:t}){e==null||e.forEach(n=>{this.registerInConnection(n.channel,n.component,n.bind)}),t==null||t.forEach(n=>{this.registerOutConnection(n.channel,n.component,n.bind,n.options)})}_cleanDynamicCrossComponents(){}_resetBridgeChannels(){const t=this.TemplateManager.computeTemplateId(this.crossContainerId),n=this.BridgeChannelManager.getCCSubscriptions(t,this.getMainNode().id)||{};this._disconnectCrossComponents(n,!0),this.BridgeChannelManager.resetBridgeChannels(this.getMainNode(),!0),this._cleanDynamicCrossComponents(),this._reconnectCrossComponents(n)}logout(){this.TemplateManager.selected!==this.initialTemplate&&(this.BridgeChannelManager.publishPrivatePageStatus(this.TemplateManager.selected,!1),this._resetBridgeChannels(),this.usingDeclarativeCrossContainer||this.TemplateManager.removeTemplateChildrens(this.crossContainerId),this.TemplateManager.removeTemplates("",this.crossContainerId),this.ActionChannelManager.subscribeAll(),this._addInitialSubscribersToEvents(),this.resetInterceptorContext(),this.Router.init(),this.Router.go(this.initialTemplate))}onRender(e){var t;if(!e.parentNode&&this.mainNode){(t=document.getElementById(this.mainNode))==null||t.appendChild(e);const n=new CustomEvent("componentsInTemplateLoaded");document.body.dispatchEvent(n)}}loadCellsPage(e){return this.Router.routes[e].action()}_parseRoutes(e){const t={};return e.forEach(n=>{const{name:r,path:s,action:o,notFound:a,component:c}=n;t[r]={path:s,action:o,notFound:!!a,component:c}}),t}_lazyLoadPages(e){e.forEach(t=>{this.loadCellsPage(t)})}}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ue=globalThis,je=ue.ShadowRoot&&(ue.ShadyCSS===void 0||ue.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,He=Symbol(),nt=new WeakMap;let Gt=class{constructor(e,t,n){if(this._$cssResult$=!0,n!==He)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(je&&e===void 0){const n=t!==void 0&&t.length===1;n&&(e=nt.get(t)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),n&&nt.set(t,e))}return e}toString(){return this.cssText}};const Fr=i=>new Gt(typeof i=="string"?i:i+"",void 0,He),Vt=(i,...e)=>{const t=i.length===1?i[0]:e.reduce((n,r,s)=>n+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(r)+i[s+1],i[0]);return new Gt(t,i,He)},Dr=(i,e)=>{if(je)i.adoptedStyleSheets=e.map(t=>t instanceof CSSStyleSheet?t:t.styleSheet);else for(const t of e){const n=document.createElement("style"),r=ue.litNonce;r!==void 0&&n.setAttribute("nonce",r),n.textContent=t.cssText,i.appendChild(n)}},rt=je?i=>i:i=>i instanceof CSSStyleSheet?(e=>{let t="";for(const n of e.cssRules)t+=n.cssText;return Fr(t)})(i):i;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:zr,defineProperty:Wr,getOwnPropertyDescriptor:qr,getOwnPropertyNames:Gr,getOwnPropertySymbols:Vr,getPrototypeOf:Yr}=Object,x=globalThis,it=x.trustedTypes,Kr=it?it.emptyScript:"",Ee=x.reactiveElementPolyfillSupport,Q=(i,e)=>i,pe={toAttribute(i,e){switch(e){case Boolean:i=i?Kr:null;break;case Object:case Array:i=i==null?i:JSON.stringify(i)}return i},fromAttribute(i,e){let t=i;switch(e){case Boolean:t=i!==null;break;case Number:t=i===null?null:Number(i);break;case Object:case Array:try{t=JSON.parse(i)}catch{t=null}}return t}},Fe=(i,e)=>!zr(i,e),st={attribute:!0,type:String,converter:pe,reflect:!1,useDefault:!1,hasChanged:Fe};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),x.litPropertyMetadata??(x.litPropertyMetadata=new WeakMap);let U=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,t=st){if(t.state&&(t.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((t=Object.create(t)).wrapped=!0),this.elementProperties.set(e,t),!t.noAccessor){const n=Symbol(),r=this.getPropertyDescriptor(e,n,t);r!==void 0&&Wr(this.prototype,e,r)}}static getPropertyDescriptor(e,t,n){const{get:r,set:s}=qr(this.prototype,e)??{get(){return this[t]},set(o){this[t]=o}};return{get:r,set(o){const a=r==null?void 0:r.call(this);s==null||s.call(this,o),this.requestUpdate(e,a,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??st}static _$Ei(){if(this.hasOwnProperty(Q("elementProperties")))return;const e=Yr(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(Q("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(Q("properties"))){const t=this.properties,n=[...Gr(t),...Vr(t)];for(const r of n)this.createProperty(r,t[r])}const e=this[Symbol.metadata];if(e!==null){const t=litPropertyMetadata.get(e);if(t!==void 0)for(const[n,r]of t)this.elementProperties.set(n,r)}this._$Eh=new Map;for(const[t,n]of this.elementProperties){const r=this._$Eu(t,n);r!==void 0&&this._$Eh.set(r,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const n=new Set(e.flat(1/0).reverse());for(const r of n)t.unshift(rt(r))}else e!==void 0&&t.push(rt(e));return t}static _$Eu(e,t){const n=t.attribute;return n===!1?void 0:typeof n=="string"?n:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(t=>this.enableUpdating=t),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(t=>t(this))}addController(e){var t;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((t=e.hostConnected)==null||t.call(e))}removeController(e){var t;(t=this._$EO)==null||t.delete(e)}_$E_(){const e=new Map,t=this.constructor.elementProperties;for(const n of t.keys())this.hasOwnProperty(n)&&(e.set(n,this[n]),delete this[n]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return Dr(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(t=>{var n;return(n=t.hostConnected)==null?void 0:n.call(t)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(t=>{var n;return(n=t.hostDisconnected)==null?void 0:n.call(t)})}attributeChangedCallback(e,t,n){this._$AK(e,n)}_$ET(e,t){var s;const n=this.constructor.elementProperties.get(e),r=this.constructor._$Eu(e,n);if(r!==void 0&&n.reflect===!0){const o=(((s=n.converter)==null?void 0:s.toAttribute)!==void 0?n.converter:pe).toAttribute(t,n.type);this._$Em=e,o==null?this.removeAttribute(r):this.setAttribute(r,o),this._$Em=null}}_$AK(e,t){var s,o;const n=this.constructor,r=n._$Eh.get(e);if(r!==void 0&&this._$Em!==r){const a=n.getPropertyOptions(r),c=typeof a.converter=="function"?{fromAttribute:a.converter}:((s=a.converter)==null?void 0:s.fromAttribute)!==void 0?a.converter:pe;this._$Em=r;const l=c.fromAttribute(t,a.type);this[r]=l??((o=this._$Ej)==null?void 0:o.get(r))??l,this._$Em=null}}requestUpdate(e,t,n){var r;if(e!==void 0){const s=this.constructor,o=this[e];if(n??(n=s.getPropertyOptions(e)),!((n.hasChanged??Fe)(o,t)||n.useDefault&&n.reflect&&o===((r=this._$Ej)==null?void 0:r.get(e))&&!this.hasAttribute(s._$Eu(e,n))))return;this.C(e,t,n)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,t,{useDefault:n,reflect:r,wrapped:s},o){n&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??t??this[e]),s!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||n||(t=void 0),this._$AL.set(e,t)),r===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(t){Promise.reject(t)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var n;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[s,o]of this._$Ep)this[s]=o;this._$Ep=void 0}const r=this.constructor.elementProperties;if(r.size>0)for(const[s,o]of r){const{wrapped:a}=o,c=this[s];a!==!0||this._$AL.has(s)||c===void 0||this.C(s,void 0,o,c)}}let e=!1;const t=this._$AL;try{e=this.shouldUpdate(t),e?(this.willUpdate(t),(n=this._$EO)==null||n.forEach(r=>{var s;return(s=r.hostUpdate)==null?void 0:s.call(r)}),this.update(t)):this._$EM()}catch(r){throw e=!1,this._$EM(),r}e&&this._$AE(t)}willUpdate(e){}_$AE(e){var t;(t=this._$EO)==null||t.forEach(n=>{var r;return(r=n.hostUpdated)==null?void 0:r.call(n)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(t=>this._$ET(t,this[t]))),this._$EM()}updated(e){}firstUpdated(e){}};U.elementStyles=[],U.shadowRootOptions={mode:"open"},U[Q("elementProperties")]=new Map,U[Q("finalized")]=new Map,Ee==null||Ee({ReactiveElement:U}),(x.reactiveElementVersions??(x.reactiveElementVersions=[])).push("2.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const X=globalThis,fe=X.trustedTypes,ot=fe?fe.createPolicy("lit-html",{createHTML:i=>i}):void 0,Yt="$lit$",A=`lit$${Math.random().toFixed(9).slice(2)}$`,Kt="?"+A,Qr=`<${Kt}>`,M=document,ee=()=>M.createComment(""),te=i=>i===null||typeof i!="object"&&typeof i!="function",De=Array.isArray,Xr=i=>De(i)||typeof(i==null?void 0:i[Symbol.iterator])=="function",Se=`[ 	
\f\r]`,Y=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,at=/-->/g,ct=/>/g,$=RegExp(`>|${Se}(?:([^\\s"'>=/]+)(${Se}*=${Se}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),lt=/'/g,ut=/"/g,Qt=/^(?:script|style|textarea|title)$/i,Jr=i=>(e,...t)=>({_$litType$:i,strings:e,values:t}),ht=Jr(1),z=Symbol.for("lit-noChange"),_=Symbol.for("lit-nothing"),pt=new WeakMap,O=M.createTreeWalker(M,129);function Xt(i,e){if(!De(i)||!i.hasOwnProperty("raw"))throw Error("invalid template strings array");return ot!==void 0?ot.createHTML(e):e}const Zr=(i,e)=>{const t=i.length-1,n=[];let r,s=e===2?"<svg>":e===3?"<math>":"",o=Y;for(let a=0;a<t;a++){const c=i[a];let l,u,h=-1,d=0;for(;d<c.length&&(o.lastIndex=d,u=o.exec(c),u!==null);)d=o.lastIndex,o===Y?u[1]==="!--"?o=at:u[1]!==void 0?o=ct:u[2]!==void 0?(Qt.test(u[2])&&(r=RegExp("</"+u[2],"g")),o=$):u[3]!==void 0&&(o=$):o===$?u[0]===">"?(o=r??Y,h=-1):u[1]===void 0?h=-2:(h=o.lastIndex-u[2].length,l=u[1],o=u[3]===void 0?$:u[3]==='"'?ut:lt):o===ut||o===lt?o=$:o===at||o===ct?o=Y:(o=$,r=void 0);const f=o===$&&i[a+1].startsWith("/>")?" ":"";s+=o===Y?c+Qr:h>=0?(n.push(l),c.slice(0,h)+Yt+c.slice(h)+A+f):c+A+(h===-2?a:f)}return[Xt(i,s+(i[t]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),n]};class ne{constructor({strings:e,_$litType$:t},n){let r;this.parts=[];let s=0,o=0;const a=e.length-1,c=this.parts,[l,u]=Zr(e,t);if(this.el=ne.createElement(l,n),O.currentNode=this.el.content,t===2||t===3){const h=this.el.content.firstChild;h.replaceWith(...h.childNodes)}for(;(r=O.nextNode())!==null&&c.length<a;){if(r.nodeType===1){if(r.hasAttributes())for(const h of r.getAttributeNames())if(h.endsWith(Yt)){const d=u[o++],f=r.getAttribute(h).split(A),b=/([.?@])?(.*)/.exec(d);c.push({type:1,index:s,name:b[2],strings:f,ctor:b[1]==="."?ti:b[1]==="?"?ni:b[1]==="@"?ri:me}),r.removeAttribute(h)}else h.startsWith(A)&&(c.push({type:6,index:s}),r.removeAttribute(h));if(Qt.test(r.tagName)){const h=r.textContent.split(A),d=h.length-1;if(d>0){r.textContent=fe?fe.emptyScript:"";for(let f=0;f<d;f++)r.append(h[f],ee()),O.nextNode(),c.push({type:2,index:++s});r.append(h[d],ee())}}}else if(r.nodeType===8)if(r.data===Kt)c.push({type:2,index:s});else{let h=-1;for(;(h=r.data.indexOf(A,h+1))!==-1;)c.push({type:7,index:s}),h+=A.length-1}s++}}static createElement(e,t){const n=M.createElement("template");return n.innerHTML=e,n}}function W(i,e,t=i,n){var o,a;if(e===z)return e;let r=n!==void 0?(o=t._$Co)==null?void 0:o[n]:t._$Cl;const s=te(e)?void 0:e._$litDirective$;return(r==null?void 0:r.constructor)!==s&&((a=r==null?void 0:r._$AO)==null||a.call(r,!1),s===void 0?r=void 0:(r=new s(i),r._$AT(i,t,n)),n!==void 0?(t._$Co??(t._$Co=[]))[n]=r:t._$Cl=r),r!==void 0&&(e=W(i,r._$AS(i,e.values),r,n)),e}class ei{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:t},parts:n}=this._$AD,r=((e==null?void 0:e.creationScope)??M).importNode(t,!0);O.currentNode=r;let s=O.nextNode(),o=0,a=0,c=n[0];for(;c!==void 0;){if(o===c.index){let l;c.type===2?l=new ie(s,s.nextSibling,this,e):c.type===1?l=new c.ctor(s,c.name,c.strings,this,e):c.type===6&&(l=new ii(s,this,e)),this._$AV.push(l),c=n[++a]}o!==(c==null?void 0:c.index)&&(s=O.nextNode(),o++)}return O.currentNode=M,r}p(e){let t=0;for(const n of this._$AV)n!==void 0&&(n.strings!==void 0?(n._$AI(e,n,t),t+=n.strings.length-2):n._$AI(e[t])),t++}}class ie{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,t,n,r){this.type=2,this._$AH=_,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=n,this.options=r,this._$Cv=(r==null?void 0:r.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return t!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=W(this,e,t),te(e)?e===_||e==null||e===""?(this._$AH!==_&&this._$AR(),this._$AH=_):e!==this._$AH&&e!==z&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):Xr(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==_&&te(this._$AH)?this._$AA.nextSibling.data=e:this.T(M.createTextNode(e)),this._$AH=e}$(e){var s;const{values:t,_$litType$:n}=e,r=typeof n=="number"?this._$AC(e):(n.el===void 0&&(n.el=ne.createElement(Xt(n.h,n.h[0]),this.options)),n);if(((s=this._$AH)==null?void 0:s._$AD)===r)this._$AH.p(t);else{const o=new ei(r,this),a=o.u(this.options);o.p(t),this.T(a),this._$AH=o}}_$AC(e){let t=pt.get(e.strings);return t===void 0&&pt.set(e.strings,t=new ne(e)),t}k(e){De(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let n,r=0;for(const s of e)r===t.length?t.push(n=new ie(this.O(ee()),this.O(ee()),this,this.options)):n=t[r],n._$AI(s),r++;r<t.length&&(this._$AR(n&&n._$AB.nextSibling,r),t.length=r)}_$AR(e=this._$AA.nextSibling,t){var n;for((n=this._$AP)==null?void 0:n.call(this,!1,!0,t);e!==this._$AB;){const r=e.nextSibling;e.remove(),e=r}}setConnected(e){var t;this._$AM===void 0&&(this._$Cv=e,(t=this._$AP)==null||t.call(this,e))}}class me{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,t,n,r,s){this.type=1,this._$AH=_,this._$AN=void 0,this.element=e,this.name=t,this._$AM=r,this.options=s,n.length>2||n[0]!==""||n[1]!==""?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=_}_$AI(e,t=this,n,r){const s=this.strings;let o=!1;if(s===void 0)e=W(this,e,t,0),o=!te(e)||e!==this._$AH&&e!==z,o&&(this._$AH=e);else{const a=e;let c,l;for(e=s[0],c=0;c<s.length-1;c++)l=W(this,a[n+c],t,c),l===z&&(l=this._$AH[c]),o||(o=!te(l)||l!==this._$AH[c]),l===_?e=_:e!==_&&(e+=(l??"")+s[c+1]),this._$AH[c]=l}o&&!r&&this.j(e)}j(e){e===_?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class ti extends me{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===_?void 0:e}}class ni extends me{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==_)}}class ri extends me{constructor(e,t,n,r,s){super(e,t,n,r,s),this.type=5}_$AI(e,t=this){if((e=W(this,e,t,0)??_)===z)return;const n=this._$AH,r=e===_&&n!==_||e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive,s=e!==_&&(n===_||r);r&&this.element.removeEventListener(this.name,this,n),s&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t;typeof this._$AH=="function"?this._$AH.call(((t=this.options)==null?void 0:t.host)??this.element,e):this._$AH.handleEvent(e)}}class ii{constructor(e,t,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){W(this,e)}}const Ae=X.litHtmlPolyfillSupport;Ae==null||Ae(ne,ie),(X.litHtmlVersions??(X.litHtmlVersions=[])).push("3.3.1");const si=(i,e,t)=>{const n=(t==null?void 0:t.renderBefore)??e;let r=n._$litPart$;if(r===void 0){const s=(t==null?void 0:t.renderBefore)??null;n._$litPart$=r=new ie(e.insertBefore(ee(),s),s,void 0,t??{})}return r._$AI(i),r};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const N=globalThis;class J extends U{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var t;const e=super.createRenderRoot();return(t=this.renderOptions).renderBefore??(t.renderBefore=e.firstChild),e}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=si(t,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return z}}var dt;J._$litElement$=!0,J.finalized=!0,(dt=N.litElementHydrateSupport)==null||dt.call(N,{LitElement:J});const Pe=N.litElementPolyfillSupport;Pe==null||Pe({LitElement:J});(N.litElementVersions??(N.litElementVersions=[])).push("4.2.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const oi=i=>(e,t)=>{t!==void 0?t.addInitializer(()=>{customElements.define(i,e)}):customElements.define(i,e)};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ai={attribute:!0,type:String,converter:pe,reflect:!1,hasChanged:Fe},ci=(i=ai,e,t)=>{const{kind:n,metadata:r}=t;let s=globalThis.litPropertyMetadata.get(r);if(s===void 0&&globalThis.litPropertyMetadata.set(r,s=new Map),n==="setter"&&((i=Object.create(i)).wrapped=!0),s.set(t.name,i),n==="accessor"){const{name:o}=t;return{set(a){const c=e.get.call(this);e.set.call(this,a),this.requestUpdate(o,c,i)},init(a){return a!==void 0&&this.C(o,void 0,i,a),a}}}if(n==="setter"){const{name:o}=t;return function(a){const c=this[o];e.call(this,a),this.requestUpdate(o,c,i)}}throw Error("Unsupported decorator location: "+n)};function li(i){return(e,t)=>typeof t=="object"?ci(i,e,t):((n,r,s)=>{const o=r.hasOwnProperty(s);return r.constructor.createProperty(s,n),o?Object.getOwnPropertyDescriptor(r,s):void 0})(i,e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function ui(i){return li({...i,state:!0,attribute:!1})}const hi={};class pi{__callBridge(...e){const[t,...n]=e;let r;if(P){if(!P[t])throw new Error(`WARNING: Invalid cells bridge command execution: ${t}.`);return r=P[t](...n),r}return Lr(t,n),r}registerService(e,t){this.services[e]=t}constructor(){this.services=hi;const e=this;this.registerService("subscribe",function(t,n){return e.__callBridge("registerInConnection",t,this,n)}),this.registerService("unsubscribe",function(t){return e.__callBridge("unsubscribe",t,this)}),this.registerService("publish",function(t,n,r={}){return e.__callBridge("publish",t,n,r)}),this.registerService("publishOn",function(t,n,r){return e.__callBridge("registerOutConnection",t,n,r)}),this.registerService("navigate",function(t,n){return e.__callBridge("navigate",t,n)}),this.registerService("updateInterceptorContext",function(t){return e.__callBridge("updateInterceptorContext",t)}),this.registerService("resetInterceptorContext",function(){return e.__callBridge("resetInterceptorContext")}),this.registerService("getInterceptorContext",function(){return e.__callBridge("getInterceptorContext")}),this.registerService("setInterceptorContext",function(t){return e.__callBridge("setInterceptorContext",t)}),this.registerService("getCurrentRoute",function(){return e.__callBridge("getCurrentRoute")}),this.registerService("updateSubroute",function(t){return e.__callBridge("updateSubroute",t)})}_plugCellsCore(e,t=!0){Object.entries(this.services).forEach(function([n,r]){e[n]=t?r.bind(e):r})}_plugCellsCoreToPrototype(e,t=!0){Object.entries(this.services).forEach(function([n,r]){Object.defineProperty(e.prototype,n,{value:t?r.bind(e):r,writable:!0,configurable:!0})})}addCellsCoreToPrototype(e){_plugCellsCoreToPrototype(e,!1)}}function fi(i){return new pi()._plugCellsCore(i,!1),i}class di{constructor(e){this.subscriptions=[],fi(this),this.subscribe=this.subscribe.bind(e),this.unsubscribe=this.unsubscribe.bind(e),this.publish=this.publish.bind(e),(this.host=e).addController(this),this._definedBoundedProperties()}_definedBoundedProperties(){const e=this.host.constructor.inbounds,t=this.host.constructor.outbounds;if(!e&&!t)return;const n=this._mergeBounds(e,t);Object.keys(n).forEach(r=>{let{output:s,input:o,skipUpdate:a,action:c}=n[r];this._inOut(r,s,o,a,c)})}_mergeBounds(e={},t={}){const n=[];return Object.keys(e).forEach(r=>{const{channel:s,skipUpdate:o,action:a}=e[r];n[r]={input:s,skipUpdate:o,action:a}}),Object.keys(t).forEach(r=>{const{channel:s}=t[r];let o=n[r]||{};n[r]={...o,output:s}}),n}_inOut(e,t,n,r=!1,s){let o,a=u=>{o=u,this.publish(t,u)},c=()=>o,l;s&&typeof s=="function"?l=u=>{o=s(u),r||this.host.requestUpdate()}:l=u=>{o=u,r||this.host.requestUpdate()},this.subscriptions.push({channel:n,action:l}),t?Object.defineProperties(this.host,{[e]:{get:c,set:a}}):Object.defineProperties(this.host,{[e]:{get:c}})}hostConnected(){for(const e of this.subscriptions)this.subscribe(e.channel,e.action)}hostDisconnected(){for(const e of this.subscriptions)this.unsubscribe(e.channel)}}const gi="modulepreload",mi=function(i){return"/moleApp/"+i},ft={},ae=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(t.map(c=>{if(c=mi(c),c in ft)return;ft[c]=!0;const l=c.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const h=document.createElement("link");if(h.rel=l?"stylesheet":gi,l||(h.as="script"),h.crossOrigin="",h.href=c,a&&h.setAttribute("nonce",a),document.head.appendChild(h),l)return new Promise((d,f)=>{h.addEventListener("load",d),h.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},vi=[{path:"/",name:"home",component:"home-page",action:async()=>{await ae(()=>import("./home-page-C6LP4tzv.js"),__vite__mapDeps([0,1,2]))}},{path:"/game",name:"game",component:"game-page",action:async()=>{await ae(()=>import("./game-page-CIkoBjjK.js"),__vite__mapDeps([3,2,1,4]))}},{path:"/score",name:"score",component:"score-page",action:async()=>{await ae(()=>import("./score-page-CZkkBCNc.js"),__vite__mapDeps([5,2,1,4]))}},{path:"/not-found",name:"not-found",notFound:!1,component:"not-found-page",action:async()=>{await ae(()=>import("./not-found-page-BWdokVNO.js"),__vite__mapDeps([6,1]))}}],bi=Vt`
  :host {
    display: block;
    --header-bg: #7a5f3e;
    --header-text: #ffffff;
  }

  main {
    min-height: auto;
  }

  .header {
    height: 3.5rem;
    background-color: var(--header-bg);
    color: var(--header-text);
    box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.15);
  }

  .header--home {
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .mole-logo {
    height: 7.44rem;
    width: 10.5rem;
    padding-top: 3.9rem;
  }
`,yi=Vt`
  [data-cells-page] {
    display: none;
    position: absolute;
    inset: 0;
    z-index: 0;
  }

  [data-cells-page][state='active'],
  [data-cells-page][state='inactive'][page-animation] {
    display: block;
  }

  [data-cells-page][state='inactive'] {
    z-index: 2;
  }

  [data-cells-page][state='active'] {
    z-index: 3;
  }

  [data-cells-page][page-animation] {
    animation-duration: var(--page-transition-animation-duration, 195ms);
    animation-timing-function: var(
      --page-transition-animation-timing-function,
      cubic-bezier(0.4, 0, 0.2, 1)
    );
    animation-fill-mode: both;
    animation-name: base-cells-page;
  }

  /* fade */
  [data-cells-page][page-animation='fadeIn'] {
    animation-name: fadeIn;
  }

  [data-cells-page][page-animation='fadeOut'] {
    animation-name: fadeOut;
  }

  /* static */
  [data-cells-page][page-animation='static'] {
    z-index: 0 !important;
    animation-name: static;
    animation-duration: 0s;
  }

  /* horizontal */
  [data-cells-page][page-animation='moveFromRight'] {
    animation-name: moveFromRight;
  }

  [data-cells-page][page-animation='moveToLeft'] {
    animation-name: moveToLeft;
  }

  [data-cells-page][page-animation='moveFromLeft'] {
    animation-name: moveFromLeft;
  }

  [data-cells-page][page-animation='moveToRight'] {
    animation-name: moveToRight;
  }

  /*vertical*/
  [data-cells-page][page-animation='moveFromBottom'] {
    animation-name: moveFromBottom;
  }

  [data-cells-page][page-animation='moveToTop'] {
    animation-name: moveToTop;
  }

  [data-cells-page][page-animation='moveFromTop'] {
    animation-name: moveFromTop;
  }

  [data-cells-page][page-animation='moveToBottom'] {
    animation-name: moveToBottom;
  }

  @keyframes base-cells-page {
  }

  /* fade key*/
  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  @keyframes fadeOut {
    from {
      opacity: 1;
    }
    to {
      opacity: 0;
    }
  }

  /* static key*/
  @keyframes static {
    from {
      transform: translateZ(0);
    }
    to {
      transform: translateZ(0);
    }
  }

  /* horizontal key*/
  @keyframes moveFromRight {
    from {
      transform: translateX(100%);
    }
    to {
      transform: initial;
    }
  }

  @keyframes moveToLeft {
    from {
      transform: initial;
    }
    to {
      transform: translateX(-32%);
    }
  }

  @keyframes moveFromLeft {
    from {
      transform: translateX(-100%);
    }
    to {
      transform: initial;
    }
  }

  @keyframes moveToRight {
    from {
      transform: initial;
    }
    to {
      transform: translateX(32%);
    }
  }

  /*vertical key*/
  @keyframes moveFromBottom {
    from {
      transform: translateY(100%);
    }
    to {
      transform: initial;
    }
  }

  @keyframes moveToTop {
    from {
      transform: initial;
    }
    to {
      transform: translateY(-100%);
    }
  }

  @keyframes moveFromTop {
    from {
      transform: translateY(-100%);
    }
    to {
      transform: initial;
    }
  }

  @keyframes moveToBottom {
    from {
      transform: initial;
      opacity: 1;
    }
    to {
      transform: translateY(100%);
      opacity: 0.96;
    }
  }
`,_i=yi.cssText,Jt=document.createElement("style");Jt.innerHTML=_i;document.head.appendChild(Jt);const Zt=new CSSStyleSheet;Zt.replaceSync(`
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap');

  :root {
    font-family: 'Inter', system-ui, sans-serif;
  }

  body {
    margin: 0;
    font-family: inherit;
  }
`);const Ci="/moleApp/assets/logomole-BIQlmDgs.png";var wi=Object.defineProperty,Ei=Object.getOwnPropertyDescriptor,en=(i,e,t,n)=>{for(var r=n>1?void 0:n?Ei(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(r=(n?o(e,t,r):o(r))||r);return n&&r&&wi(e,t,r),r};document.adoptedStyleSheets=[...document.adoptedStyleSheets,Zt];Mr({routes:vi,mainNode:"app-content",viewLimit:2,persistentPages:[],commonPages:[]});let de=class extends J{constructor(){super(...arguments),this.controller=new di(this),this.currentRoute=this.getRoute(),this._onHashChange=()=>{this.currentRoute=this.getRoute()}}connectedCallback(){super.connectedCallback(),globalThis.addEventListener("hashchange",this._onHashChange)}disconnectedCallback(){globalThis.removeEventListener("hashchange",this._onHashChange),this.controller.unsubscribe("player-name"),super.disconnectedCallback()}getRoute(){const i=globalThis.location.hash||"",e=/^#!\/([^?]*)/.exec(i);return(e==null?void 0:e[1])||"home"}render(){const i=this.currentRoute==="home";return ht`
      ${i?ht`
            <header class="header header--home">
              <img class="mole-logo" src="${Ci}" alt="Mole Game Logo" />
            </header>
          `:void 0}

      <main>
        <slot></slot>
      </main>
    `}};de.styles=bi;en([ui()],de.prototype,"currentRoute",2);de=en([oi("app-index")],de);export{di as E,z as T,Ai as _,J as a,_ as b,Vt as i,li as n,fi as p,ui as r,oi as t,ht as x};
