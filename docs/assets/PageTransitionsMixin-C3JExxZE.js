var l=Object.defineProperty;var T=(t,a,i)=>a in t?l(t,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[a]=i;var s=(t,a,i)=>T(t,typeof a!="symbol"?a+"":a,i);const f=new WeakMap;function h(t,a){let i=a;for(;i;){if(f.get(i)===t)return!0;i=Object.getPrototypeOf(i)}return!1}function k(t){return a=>{if(h(t,a))return a;const i=t(a);return f.set(i,t),i}}const v={static:{forwardsIn:"static",forwardsOut:"static",backwardsIn:"static",backwardsOut:"static"},fade:{forwardsIn:"fadeIn",forwardsOut:"fadeOut",backwardsIn:"fadeIn",backwardsOut:"fadeOut"},horizontal:{forwardsIn:"moveFromRight",forwardsOut:"moveToLeft",backwardsIn:"moveFromLeft",backwardsOut:"moveToRight"},horizontalEverForwards:{forwardsIn:"moveFromRight",forwardsOut:"moveToLeft",backwardsIn:"moveFromRight",backwardsOut:"moveToLeft"},horizontalEverBackwards:{forwardsIn:"moveFromLeft",forwardsOut:"moveToRight",backwardsIn:"moveFromLeft",backwardsOut:"moveToRight"},verticalDownForwards:{forwardsIn:"static",forwardsOut:"moveToBottom",backwardsIn:"moveFromLeft",backwardsOut:"moveToRight"},verticalDownBackwards:{forwardsIn:"moveFromRight",forwardsOut:"moveToLeft",backwardsIn:"static",backwardsOut:"moveToBottom"},verticalUpForwards:{forwardsIn:"moveFromBottom",forwardsOut:"static",backwardsIn:"moveFromLeft",backwardsOut:"moveToRight"},verticalUp:{forwardsIn:"moveFromBottom",forwardsOut:"static",backwardsIn:"static",backwardsOut:"moveToBottom"}};function F(t,a){return[...a.parentElement.children].filter(i=>i!==a).find(i=>i.getAttribute("state")===t||i.state===t)}function d(t){t.removeAttribute("page-animation"),t.removeAttribute("page-animation-direction"),t.removeEventListener("animationend",t._animCb),t.removeEventListener("animationcancel",t._animCb)}function w(t){var i;const a=(i=t._isPreviousNavigationFor)==null?void 0:i.page;t._isPreviousNavigationFor=null,a&&w(a)}function b(t){t.dispatchEvent(new CustomEvent("page-active",{bubbles:!0,composed:!0}))}function u(t,a,i){a.eventPhase===2&&(d(t),!t.hasAttribute("page-animation")&&!i.hasAttribute("page-animation")&&requestAnimationFrame(()=>{const e=t.state==="active"?t:i;b(e)}))}function P(t,a){t._animCb=i=>u(t,i,a),t.addEventListener("animationend",t._animCb),t.addEventListener("animationcancel",t._animCb),a._animCb=i=>u(a,i,t),a.addEventListener("animationend",a._animCb),a.addEventListener("animationcancel",a._animCb)}function p(t,a,i){return(i==null?void 0:i[a])||v.static}function o(t,a,i,e){t.setAttribute("page-animation",a),t.setAttribute("page-animation-direction",i),e&&t.dispatchEvent(new CustomEvent(`animation-${i}`,{bubbles:!0,composed:!0}))}function A(t,a,i,e){let n=!1,c=i,m=e;a&&t._isPreviousNavigationFor?(c=t._isPreviousNavigationFor.type,m=t._isPreviousNavigationFor.animations,w(t),n=!0):a._isPreviousNavigationFor={page:t,type:i,animations:e},P(t,a);const r=p(t,c,m);requestAnimationFrame(()=>{n?(o(t,r.backwardsIn,"backward"),o(a,r.backwardsOut,"backward",!0)):(o(t,r.forwardsIn,"forward"),o(a,r.forwardsOut,"forward",!0))})}function g(t,{disabled:a,type:i,animations:e}={}){d(t);const n=F("inactive",t);n&&!a?(d(n),A(t,n,i,e)):b(t)}const _=t=>{var a;return a=class extends t{get _pageTransitions(){return this.constructor.pageTransitionDefinitions}constructor(){super(),this.pageTransitionType="fade",this.pageTransitionDisabled=!1}connectedCallback(){super.connectedCallback(),this.dataset.cellsPage=""}updated(i){var e;(e=super.updated)==null||e.call(this,i),i.has("state")&&this.state==="active"&&g(this,{disabled:this.pageTransitionDisabled,type:this.pageTransitionType,animations:this._pageTransitions})}},s(a,"properties",{state:{reflect:!0},pageTransitionType:{attribute:"page-transition-type"},pageTransitionDisabled:{type:Boolean,attribute:"page-transition-disabled"}}),s(a,"pageTransitionDefinitions",{...v}),a},L=k(_);export{L as P,k as d};
